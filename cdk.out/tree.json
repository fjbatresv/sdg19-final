{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.233.0"},"children":{"Sdg19ReplicaStack":{"id":"Sdg19ReplicaStack","path":"Sdg19ReplicaStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.233.0"},"children":{"EmailsReplicaKey":{"id":"EmailsReplicaKey","path":"Sdg19ReplicaStack/EmailsReplicaKey","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.Key","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19ReplicaStack/EmailsReplicaKey/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.CfnKey","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KMS::Key","aws:cdk:cloudformation:props":{"enableKeyRotation":true,"keyPolicy":{"Statement":[{"Action":"kms:*","Effect":"Allow","Principal":{"AWS":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::123456789012:root"]]}},"Resource":"*"}],"Version":"2012-10-17"},"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}}}},"EmailsReplicaBucket":{"id":"EmailsReplicaBucket","path":"Sdg19ReplicaStack/EmailsReplicaBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19ReplicaStack/EmailsReplicaBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"aws:kms","kmsMasterKeyId":{"Fn::GetAtt":["EmailsReplicaKeyF79649DF","Arn"]}}}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":3650,"status":"Enabled","transitions":[{"storageClass":"GLACIER","transitionInDays":365}]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"Sdg19ReplicaStack/EmailsReplicaBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19ReplicaStack/EmailsReplicaBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"EmailsReplicaBucket67B3049C"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["EmailsReplicaBucket67B3049C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailsReplicaBucket67B3049C","Arn"]},"/*"]]}]},{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["EmailsReplicaBucket67B3049C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailsReplicaBucket67B3049C","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"Sdg19ReplicaStack/EmailsReplicaBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.233.0","metadata":[]},"children":{"Default":{"id":"Default","path":"Sdg19ReplicaStack/EmailsReplicaBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"Sdg19ReplicaStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.233.0"},"children":{"Staging":{"id":"Staging","path":"Sdg19ReplicaStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.233.0"}},"Role":{"id":"Role","path":"Sdg19ReplicaStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}},"Handler":{"id":"Handler","path":"Sdg19ReplicaStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}},"EmailsReplicaBucketName":{"id":"EmailsReplicaBucketName","path":"Sdg19ReplicaStack/EmailsReplicaBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.233.0"}},"EmailsReplicaKmsKeyArn":{"id":"EmailsReplicaKmsKeyArn","path":"Sdg19ReplicaStack/EmailsReplicaKmsKeyArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.233.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"Sdg19ReplicaStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Default":{"id":"Default","path":"Sdg19ReplicaStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}},"ExportsWriteruseast10F67B507":{"id":"ExportsWriteruseast10F67B507","path":"Sdg19ReplicaStack/ExportsWriteruseast10F67B507","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Resource":{"id":"Resource","path":"Sdg19ReplicaStack/ExportsWriteruseast10F67B507/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.233.0","metadata":[]},"children":{"Default":{"id":"Default","path":"Sdg19ReplicaStack/ExportsWriteruseast10F67B507/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}}}},"Custom::CrossRegionExportWriterCustomResourceProvider":{"id":"Custom::CrossRegionExportWriterCustomResourceProvider","path":"Sdg19ReplicaStack/Custom::CrossRegionExportWriterCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.233.0"},"children":{"Staging":{"id":"Staging","path":"Sdg19ReplicaStack/Custom::CrossRegionExportWriterCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.233.0"}},"Role":{"id":"Role","path":"Sdg19ReplicaStack/Custom::CrossRegionExportWriterCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}},"Handler":{"id":"Handler","path":"Sdg19ReplicaStack/Custom::CrossRegionExportWriterCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"Sdg19ReplicaStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.233.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"Sdg19ReplicaStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.233.0"}}}},"Sdg19PrimaryStack":{"id":"Sdg19PrimaryStack","path":"Sdg19PrimaryStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.233.0"},"children":{"HostedZone":{"id":"HostedZone","path":"Sdg19PrimaryStack/HostedZone","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"EmailsReplicaKey":{"id":"EmailsReplicaKey","path":"Sdg19PrimaryStack/EmailsReplicaKey","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"DataKey":{"id":"DataKey","path":"Sdg19PrimaryStack/DataKey","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.Key","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/DataKey/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kms.CfnKey","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KMS::Key","aws:cdk:cloudformation:props":{"enableKeyRotation":true,"keyPolicy":{"Statement":[{"Action":"kms:*","Effect":"Allow","Principal":{"AWS":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::123456789012:root"]]}},"Resource":"*"},{"Action":["kms:Decrypt","kms:GenerateDataKey"],"Effect":"Allow","Principal":{"Service":"sns.amazonaws.com"},"Resource":"*"}],"Version":"2012-10-17"},"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}}}},"MainTable":{"id":"MainTable","path":"Sdg19PrimaryStack/MainTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/MainTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"},{"attributeName":"SK","attributeType":"S"},{"attributeName":"GSI1PK","attributeType":"S"},{"attributeName":"GSI1SK","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"GSI1","keySchema":[{"attributeName":"GSI1PK","keyType":"HASH"},{"attributeName":"GSI1SK","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"PK","keyType":"HASH"},{"attributeName":"SK","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"sseSpecification":{"sseEnabled":true,"kmsMasterKeyId":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]},"sseType":"KMS"},"streamSpecification":{"streamViewType":"NEW_IMAGE"},"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"ScalingRole":{"id":"ScalingRole","path":"Sdg19PrimaryStack/MainTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}}}},"OrdersTopic":{"id":"OrdersTopic","path":"Sdg19PrimaryStack/OrdersTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrdersTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]},"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}}}},"OrdersQueueDLQ":{"id":"OrdersQueueDLQ","path":"Sdg19PrimaryStack/OrdersQueueDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrdersQueueDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]},"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}}}},"OrdersQueue":{"id":"OrdersQueue","path":"Sdg19PrimaryStack/OrdersQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrdersQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]},"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["OrdersQueueDLQB05DAA0E","Arn"]},"maxReceiveCount":5},"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"visibilityTimeout":90}}},"Policy":{"id":"Policy","path":"Sdg19PrimaryStack/OrdersQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrdersQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Condition":{"ArnEquals":{"aws:SourceArn":{"Ref":"OrdersTopic47790A41"}}},"Effect":"Allow","Principal":{"Service":"sns.amazonaws.com"},"Resource":{"Fn::GetAtt":["OrdersQueue3DFA1D51","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"OrdersQueue3DFA1D51"}]}}}}},"Sdg19PrimaryStackOrdersTopic30D02781":{"id":"Sdg19PrimaryStackOrdersTopic30D02781","path":"Sdg19PrimaryStack/OrdersQueue/Sdg19PrimaryStackOrdersTopic30D02781","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Subscription","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrdersQueue/Sdg19PrimaryStackOrdersTopic30D02781/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnSubscription","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Subscription","aws:cdk:cloudformation:props":{"endpoint":{"Fn::GetAtt":["OrdersQueue3DFA1D51","Arn"]},"protocol":"sqs","rawMessageDelivery":false,"topicArn":{"Ref":"OrdersTopic47790A41"}}}}}}}},"OrdersLakeQueueDLQ":{"id":"OrdersLakeQueueDLQ","path":"Sdg19PrimaryStack/OrdersLakeQueueDLQ","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrdersLakeQueueDLQ/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]},"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}}}},"OrdersLakeQueue":{"id":"OrdersLakeQueue","path":"Sdg19PrimaryStack/OrdersLakeQueue","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.Queue","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrdersLakeQueue/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueue","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::Queue","aws:cdk:cloudformation:props":{"kmsMasterKeyId":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]},"redrivePolicy":{"deadLetterTargetArn":{"Fn::GetAtt":["OrdersLakeQueueDLQ7E963BA6","Arn"]},"maxReceiveCount":5},"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"visibilityTimeout":60}}},"Policy":{"id":"Policy","path":"Sdg19PrimaryStack/OrdersLakeQueue/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.QueuePolicy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrdersLakeQueue/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sqs.CfnQueuePolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SQS::QueuePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sqs:SendMessage","Condition":{"ArnEquals":{"aws:SourceArn":{"Ref":"OrdersTopic47790A41"}}},"Effect":"Allow","Principal":{"Service":"sns.amazonaws.com"},"Resource":{"Fn::GetAtt":["OrdersLakeQueue83376934","Arn"]}}],"Version":"2012-10-17"},"queues":[{"Ref":"OrdersLakeQueue83376934"}]}}}}},"Sdg19PrimaryStackOrdersTopic30D02781":{"id":"Sdg19PrimaryStackOrdersTopic30D02781","path":"Sdg19PrimaryStack/OrdersLakeQueue/Sdg19PrimaryStackOrdersTopic30D02781","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Subscription","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrdersLakeQueue/Sdg19PrimaryStackOrdersTopic30D02781/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnSubscription","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Subscription","aws:cdk:cloudformation:props":{"endpoint":{"Fn::GetAtt":["OrdersLakeQueue83376934","Arn"]},"protocol":"sqs","rawMessageDelivery":false,"topicArn":{"Ref":"OrdersTopic47790A41"}}}}}}}},"UserPool":{"id":"UserPool","path":"Sdg19PrimaryStack/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":[],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":10,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":true}},"smsVerificationMessage":"The verification code to your new account is {####}","userPoolTags":{"project":"sdg19-final","reason":"sdg19"},"usernameAttributes":["email"],"verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}}}}},"UserPoolClient":{"id":"UserPoolClient","path":"Sdg19PrimaryStack/UserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/UserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}}}},"ApiAccessLogs":{"id":"ApiAccessLogs","path":"Sdg19PrimaryStack/ApiAccessLogs","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/ApiAccessLogs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":30,"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"Policy":{"id":"Policy","path":"Sdg19PrimaryStack/ApiAccessLogs/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.ResourcePolicy","version":"2.233.0","metadata":[]},"children":{"ResourcePolicy":{"id":"ResourcePolicy","path":"Sdg19PrimaryStack/ApiAccessLogs/Policy/ResourcePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnResourcePolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::ResourcePolicy","aws:cdk:cloudformation:props":{"policyDocument":{"Fn::Join":["",["{\"Statement\":[{\"Action\":[\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"},\"Resource\":[\"",{"Fn::GetAtt":["ApiAccessLogsE9DF007D","Arn"]},"\",\"",{"Fn::GetAtt":["ApiAccessLogsE9DF007D","Arn"]},":*\"]}],\"Version\":\"2012-10-17\"}"]]},"policyName":"Sdg19PrimaryStackApiAccessLogsPolicy346716C4"}}}}}}},"HttpApi":{"id":"HttpApi","path":"Sdg19PrimaryStack/HttpApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpApi","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnApi","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Api","aws:cdk:cloudformation:props":{"corsConfiguration":{"allowHeaders":["authorization","content-type","x-amz-date","x-api-key","x-amz-security-token","x-amz-user-agent"],"allowMethods":["GET","POST","OPTIONS"],"allowOrigins":["https://web.example.com"]},"name":"sdg19-api","protocolType":"HTTP","tags":{"project":"sdg19-final","reason":"sdg19"}}}},"$default":{"id":"$default","path":"Sdg19PrimaryStack/HttpApi/$default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpStage","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/$default/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnStage","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Stage","aws:cdk:cloudformation:props":{"accessLogSettings":{"destinationArn":{"Fn::GetAtt":["ApiAccessLogsE9DF007D","Arn"]},"format":"{\"requestId\":\"$context.requestId\",\"ip\":\"$context.identity.sourceIp\",\"user\":\"$context.identity.user\",\"caller\":\"$context.identity.caller\",\"requestTime\":\"$context.requestTime\",\"httpMethod\":\"$context.httpMethod\",\"resourcePath\":\"$context.resourcePath\",\"status\":\"$context.status\",\"protocol\":\"$context.protocol\",\"responseLength\":\"$context.responseLength\"}"},"apiId":{"Ref":"HttpApiF5A9A8A7"},"autoDeploy":true,"stageName":"$default","tags":{"project":"sdg19-final","reason":"sdg19"}}}}}},"POST--auth--register":{"id":"POST--auth--register","path":"Sdg19PrimaryStack/HttpApi/POST--auth--register","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.233.0","metadata":[]},"children":{"RegisterIntegration":{"id":"RegisterIntegration","path":"Sdg19PrimaryStack/HttpApi/POST--auth--register/RegisterIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/POST--auth--register/RegisterIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["RegisterFnA997AE2F","Arn"]},"payloadFormatVersion":"2.0"}}}}},"RegisterIntegration-Permission":{"id":"RegisterIntegration-Permission","path":"Sdg19PrimaryStack/HttpApi/POST--auth--register/RegisterIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RegisterFnA997AE2F","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:123456789012:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/auth/register"]]}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/POST--auth--register/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"NONE","routeKey":"POST /auth/register","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiPOSTauthregisterRegisterIntegrationC123DAC5"}]]}}}}}},"POST--auth--login":{"id":"POST--auth--login","path":"Sdg19PrimaryStack/HttpApi/POST--auth--login","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.233.0","metadata":[]},"children":{"LoginIntegration":{"id":"LoginIntegration","path":"Sdg19PrimaryStack/HttpApi/POST--auth--login/LoginIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/POST--auth--login/LoginIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["LoginFn9B45172B","Arn"]},"payloadFormatVersion":"2.0"}}}}},"LoginIntegration-Permission":{"id":"LoginIntegration-Permission","path":"Sdg19PrimaryStack/HttpApi/POST--auth--login/LoginIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LoginFn9B45172B","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:123456789012:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/auth/login"]]}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/POST--auth--login/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"NONE","routeKey":"POST /auth/login","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiPOSTauthloginLoginIntegrationD65971B9"}]]}}}}}},"POST--auth--refresh":{"id":"POST--auth--refresh","path":"Sdg19PrimaryStack/HttpApi/POST--auth--refresh","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.233.0","metadata":[]},"children":{"RefreshIntegration":{"id":"RefreshIntegration","path":"Sdg19PrimaryStack/HttpApi/POST--auth--refresh/RefreshIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/POST--auth--refresh/RefreshIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["RefreshFnFA748627","Arn"]},"payloadFormatVersion":"2.0"}}}}},"RefreshIntegration-Permission":{"id":"RefreshIntegration-Permission","path":"Sdg19PrimaryStack/HttpApi/POST--auth--refresh/RefreshIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["RefreshFnFA748627","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:123456789012:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/auth/refresh"]]}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/POST--auth--refresh/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"NONE","routeKey":"POST /auth/refresh","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiPOSTauthrefreshRefreshIntegration6C4A89A0"}]]}}}}}},"GET--products":{"id":"GET--products","path":"Sdg19PrimaryStack/HttpApi/GET--products","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.233.0","metadata":[]},"children":{"ProductsIntegration":{"id":"ProductsIntegration","path":"Sdg19PrimaryStack/HttpApi/GET--products/ProductsIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/GET--products/ProductsIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["ProductsFn8FFABC69","Arn"]},"payloadFormatVersion":"2.0"}}}}},"ProductsIntegration-Permission":{"id":"ProductsIntegration-Permission","path":"Sdg19PrimaryStack/HttpApi/GET--products/ProductsIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ProductsFn8FFABC69","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:123456789012:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/products"]]}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/GET--products/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"NONE","routeKey":"GET /products","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETproductsProductsIntegrationCCC91A05"}]]}}}}}},"POST--orders":{"id":"POST--orders","path":"Sdg19PrimaryStack/HttpApi/POST--orders","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.233.0","metadata":[]},"children":{"CreateOrderIntegration":{"id":"CreateOrderIntegration","path":"Sdg19PrimaryStack/HttpApi/POST--orders/CreateOrderIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/POST--orders/CreateOrderIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["CreateOrderFnDC0D005D","Arn"]},"payloadFormatVersion":"2.0"}}}}},"CreateOrderIntegration-Permission":{"id":"CreateOrderIntegration-Permission","path":"Sdg19PrimaryStack/HttpApi/POST--orders/CreateOrderIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["CreateOrderFnDC0D005D","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:123456789012:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/orders"]]}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/POST--orders/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"JWT","authorizerId":{"Ref":"HttpApiUserPoolJwtAuthorizer9512187D"},"routeKey":"POST /orders","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiPOSTordersCreateOrderIntegrationB2641A0E"}]]}}}}}},"UserPoolJwtAuthorizer":{"id":"UserPoolJwtAuthorizer","path":"Sdg19PrimaryStack/HttpApi/UserPoolJwtAuthorizer","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpAuthorizer","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/UserPoolJwtAuthorizer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnAuthorizer","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Authorizer","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizerType":"JWT","identitySource":["$request.header.Authorization"],"jwtConfiguration":{"audience":[{"Ref":"UserPoolClient2F5918F7"}],"issuer":{"Fn::GetAtt":["UserPool6BA7E5F2","ProviderURL"]}},"name":"UserPoolJwtAuthorizer"}}}}},"GET--orders":{"id":"GET--orders","path":"Sdg19PrimaryStack/HttpApi/GET--orders","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.233.0","metadata":[]},"children":{"ListOrdersIntegration":{"id":"ListOrdersIntegration","path":"Sdg19PrimaryStack/HttpApi/GET--orders/ListOrdersIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/GET--orders/ListOrdersIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["ListOrdersFn6F2838C6","Arn"]},"payloadFormatVersion":"2.0"}}}}},"ListOrdersIntegration-Permission":{"id":"ListOrdersIntegration-Permission","path":"Sdg19PrimaryStack/HttpApi/GET--orders/ListOrdersIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["ListOrdersFn6F2838C6","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:123456789012:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/orders"]]}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/GET--orders/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"JWT","authorizerId":{"Ref":"HttpApiUserPoolJwtAuthorizer9512187D"},"routeKey":"GET /orders","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiGETordersListOrdersIntegrationFB6AF4D6"}]]}}}}}},"OPTIONS--{proxy+}":{"id":"OPTIONS--{proxy+}","path":"Sdg19PrimaryStack/HttpApi/OPTIONS--{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpRoute","version":"2.233.0","metadata":[]},"children":{"OptionsIntegration":{"id":"OptionsIntegration","path":"Sdg19PrimaryStack/HttpApi/OPTIONS--{proxy+}/OptionsIntegration","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.HttpIntegration","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/OPTIONS--{proxy+}/OptionsIntegration/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnIntegration","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Integration","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"integrationType":"AWS_PROXY","integrationUri":{"Fn::GetAtt":["OptionsFn22CF12D2","Arn"]},"payloadFormatVersion":"2.0"}}}}},"OptionsIntegration-Permission":{"id":"OptionsIntegration-Permission","path":"Sdg19PrimaryStack/HttpApi/OPTIONS--{proxy+}/OptionsIntegration-Permission","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["OptionsFn22CF12D2","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:us-east-1:123456789012:",{"Ref":"HttpApiF5A9A8A7"},"/*/*/{proxy+}"]]}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/HttpApi/OPTIONS--{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigatewayv2.CfnRoute","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGatewayV2::Route","aws:cdk:cloudformation:props":{"apiId":{"Ref":"HttpApiF5A9A8A7"},"authorizationType":"NONE","routeKey":"OPTIONS /{proxy+}","target":{"Fn::Join":["",["integrations/",{"Ref":"HttpApiOPTIONSproxyOptionsIntegrationDE6BB321"}]]}}}}}}}},"RegisterFn":{"id":"RegisterFn","path":"Sdg19PrimaryStack/RegisterFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.233.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Sdg19PrimaryStack/RegisterFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.233.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Sdg19PrimaryStack/RegisterFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/RegisterFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Sdg19PrimaryStack/RegisterFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/RegisterFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords"],"Effect":"Allow","Resource":"*"},{"Action":["cognito-idp:SignUp","cognito-idp:AdminConfirmSignUp"],"Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}}],"Version":"2012-10-17"},"policyName":"RegisterFnServiceRoleDefaultPolicy17CEC328","roles":[{"Ref":"RegisterFnServiceRole60DD91DA"}]}}}}}}},"Code":{"id":"Code","path":"Sdg19PrimaryStack/RegisterFn/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.233.0"},"children":{"Stage":{"id":"Stage","path":"Sdg19PrimaryStack/RegisterFn/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.233.0"}},"AssetBucket":{"id":"AssetBucket","path":"Sdg19PrimaryStack/RegisterFn/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.233.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/RegisterFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-bootstrap-assets-123456789012-us-east-1","s3Key":"666b9003783f246672770c7faa594fb3127c9428ed9d7ced196f1658a3844054.zip"},"environment":{"variables":{"USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"USER_POOL_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"}}},"handler":"main.registerHandler","role":{"Fn::GetAtt":["RegisterFnServiceRole60DD91DA","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"timeout":10,"tracingConfig":{"mode":"Active"}}}}}},"LoginFn":{"id":"LoginFn","path":"Sdg19PrimaryStack/LoginFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.233.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Sdg19PrimaryStack/LoginFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.233.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Sdg19PrimaryStack/LoginFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/LoginFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Sdg19PrimaryStack/LoginFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/LoginFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords"],"Effect":"Allow","Resource":"*"},{"Action":"cognito-idp:InitiateAuth","Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}}],"Version":"2012-10-17"},"policyName":"LoginFnServiceRoleDefaultPolicy129EE1D4","roles":[{"Ref":"LoginFnServiceRole693ED621"}]}}}}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/LoginFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-bootstrap-assets-123456789012-us-east-1","s3Key":"666b9003783f246672770c7faa594fb3127c9428ed9d7ced196f1658a3844054.zip"},"environment":{"variables":{"USER_POOL_ID":{"Ref":"UserPool6BA7E5F2"},"USER_POOL_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"}}},"handler":"main.loginHandler","role":{"Fn::GetAtt":["LoginFnServiceRole693ED621","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"timeout":10,"tracingConfig":{"mode":"Active"}}}}}},"RefreshFn":{"id":"RefreshFn","path":"Sdg19PrimaryStack/RefreshFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.233.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Sdg19PrimaryStack/RefreshFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.233.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Sdg19PrimaryStack/RefreshFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/RefreshFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Sdg19PrimaryStack/RefreshFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/RefreshFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords"],"Effect":"Allow","Resource":"*"},{"Action":"cognito-idp:InitiateAuth","Effect":"Allow","Resource":{"Fn::GetAtt":["UserPool6BA7E5F2","Arn"]}}],"Version":"2012-10-17"},"policyName":"RefreshFnServiceRoleDefaultPolicyEE68F60F","roles":[{"Ref":"RefreshFnServiceRole1AFCCCE5"}]}}}}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/RefreshFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-bootstrap-assets-123456789012-us-east-1","s3Key":"666b9003783f246672770c7faa594fb3127c9428ed9d7ced196f1658a3844054.zip"},"environment":{"variables":{"USER_POOL_CLIENT_ID":{"Ref":"UserPoolClient2F5918F7"}}},"handler":"main.refreshHandler","role":{"Fn::GetAtt":["RefreshFnServiceRole1AFCCCE5","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"timeout":10,"tracingConfig":{"mode":"Active"}}}}}},"ProductsFn":{"id":"ProductsFn","path":"Sdg19PrimaryStack/ProductsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.233.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Sdg19PrimaryStack/ProductsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.233.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Sdg19PrimaryStack/ProductsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/ProductsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Sdg19PrimaryStack/ProductsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/ProductsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"ProductsFnServiceRoleDefaultPolicy7F31E07D","roles":[{"Ref":"ProductsFnServiceRoleA9750689"}]}}}}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/ProductsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-bootstrap-assets-123456789012-us-east-1","s3Key":"666b9003783f246672770c7faa594fb3127c9428ed9d7ced196f1658a3844054.zip"},"handler":"main.productsHandler","role":{"Fn::GetAtt":["ProductsFnServiceRoleA9750689","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"timeout":10,"tracingConfig":{"mode":"Active"}}}}}},"CreateOrderFn":{"id":"CreateOrderFn","path":"Sdg19PrimaryStack/CreateOrderFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.233.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Sdg19PrimaryStack/CreateOrderFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.233.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Sdg19PrimaryStack/CreateOrderFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/CreateOrderFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Sdg19PrimaryStack/CreateOrderFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/CreateOrderFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:GetItem","dynamodb:Query","dynamodb:DeleteItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["MainTable74195DAB","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MainTable74195DAB","Arn"]},"/index/*"]]}]},{"Action":["kms:Decrypt","kms:Encrypt","kms:ReEncrypt*","kms:GenerateDataKey*"],"Effect":"Allow","Resource":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]}}],"Version":"2012-10-17"},"policyName":"CreateOrderFnServiceRoleDefaultPolicyB5FFA7EE","roles":[{"Ref":"CreateOrderFnServiceRole7E513123"}]}}}}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/CreateOrderFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-bootstrap-assets-123456789012-us-east-1","s3Key":"666b9003783f246672770c7faa594fb3127c9428ed9d7ced196f1658a3844054.zip"},"environment":{"variables":{"TABLE_NAME":{"Ref":"MainTable74195DAB"}}},"handler":"main.createOrderHandler","role":{"Fn::GetAtt":["CreateOrderFnServiceRole7E513123","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"timeout":10,"tracingConfig":{"mode":"Active"}}}}}},"ListOrdersFn":{"id":"ListOrdersFn","path":"Sdg19PrimaryStack/ListOrdersFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.233.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Sdg19PrimaryStack/ListOrdersFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.233.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Sdg19PrimaryStack/ListOrdersFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/ListOrdersFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Sdg19PrimaryStack/ListOrdersFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/ListOrdersFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:GetItem","dynamodb:Query"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["MainTable74195DAB","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["MainTable74195DAB","Arn"]},"/index/*"]]}]},{"Action":"kms:Decrypt","Effect":"Allow","Resource":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]}}],"Version":"2012-10-17"},"policyName":"ListOrdersFnServiceRoleDefaultPolicyBE7B98F8","roles":[{"Ref":"ListOrdersFnServiceRoleC9CADE33"}]}}}}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/ListOrdersFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-bootstrap-assets-123456789012-us-east-1","s3Key":"666b9003783f246672770c7faa594fb3127c9428ed9d7ced196f1658a3844054.zip"},"environment":{"variables":{"TABLE_NAME":{"Ref":"MainTable74195DAB"}}},"handler":"main.listOrdersHandler","role":{"Fn::GetAtt":["ListOrdersFnServiceRoleC9CADE33","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"timeout":10,"tracingConfig":{"mode":"Active"}}}}}},"OrderStreamFn":{"id":"OrderStreamFn","path":"Sdg19PrimaryStack/OrderStreamFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.233.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Sdg19PrimaryStack/OrderStreamFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.233.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Sdg19PrimaryStack/OrderStreamFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrderStreamFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Sdg19PrimaryStack/OrderStreamFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrderStreamFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords"],"Effect":"Allow","Resource":"*"},{"Action":"dynamodb:ListStreams","Effect":"Allow","Resource":"*"},{"Action":["kms:Decrypt","kms:DescribeKey"],"Effect":"Allow","Resource":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]}},{"Action":["dynamodb:DescribeStream","dynamodb:GetRecords","dynamodb:GetShardIterator"],"Effect":"Allow","Resource":{"Fn::GetAtt":["MainTable74195DAB","StreamArn"]}},{"Action":["dynamodb:DescribeStream","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:ListStreams"],"Effect":"Allow","Resource":{"Fn::GetAtt":["MainTable74195DAB","StreamArn"]}},{"Action":["kms:Decrypt","kms:Encrypt","kms:ReEncrypt*","kms:GenerateDataKey*"],"Effect":"Allow","Resource":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]}},{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"OrdersTopic47790A41"}}],"Version":"2012-10-17"},"policyName":"OrderStreamFnServiceRoleDefaultPolicy42FF25A9","roles":[{"Ref":"OrderStreamFnServiceRoleD210570F"}]}}}}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrderStreamFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-bootstrap-assets-123456789012-us-east-1","s3Key":"666b9003783f246672770c7faa594fb3127c9428ed9d7ced196f1658a3844054.zip"},"environment":{"variables":{"ORDERS_TOPIC_ARN":{"Ref":"OrdersTopic47790A41"}}},"handler":"main.orderStreamHandler","role":{"Fn::GetAtt":["OrderStreamFnServiceRoleD210570F","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"timeout":10,"tracingConfig":{"mode":"Active"}}}},"DynamoDBEventSource:Sdg19PrimaryStackMainTableE82CC0BB":{"id":"DynamoDBEventSource:Sdg19PrimaryStackMainTableE82CC0BB","path":"Sdg19PrimaryStack/OrderStreamFn/DynamoDBEventSource:Sdg19PrimaryStackMainTableE82CC0BB","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrderStreamFn/DynamoDBEventSource:Sdg19PrimaryStackMainTableE82CC0BB/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":10,"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"eventSourceArn":{"Fn::GetAtt":["MainTable74195DAB","StreamArn"]},"functionName":{"Ref":"OrderStreamFn89192B53"},"startingPosition":"LATEST"}}}}}}},"OptionsFn":{"id":"OptionsFn","path":"Sdg19PrimaryStack/OptionsFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.233.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Sdg19PrimaryStack/OptionsFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.233.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Sdg19PrimaryStack/OptionsFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OptionsFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Sdg19PrimaryStack/OptionsFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OptionsFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"OptionsFnServiceRoleDefaultPolicy28EE69DC","roles":[{"Ref":"OptionsFnServiceRole67E51491"}]}}}}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OptionsFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-bootstrap-assets-123456789012-us-east-1","s3Key":"666b9003783f246672770c7faa594fb3127c9428ed9d7ced196f1658a3844054.zip"},"handler":"main.optionsHandler","role":{"Fn::GetAtt":["OptionsFnServiceRole67E51491","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"timeout":5,"tracingConfig":{"mode":"Active"}}}}}},"Certificate":{"id":"Certificate","path":"Sdg19PrimaryStack/Certificate","constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.Certificate","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/Certificate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.CfnCertificate","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CertificateManager::Certificate","aws:cdk:cloudformation:props":{"domainName":"web.example.com","domainValidationOptions":[{"domainName":"web.example.com","hostedZoneId":"Z000000000000"},{"domainName":"api.example.com","hostedZoneId":"Z000000000000"}],"subjectAlternativeNames":["api.example.com"],"tags":[{"key":"Name","value":"Sdg19PrimaryStack/Certificate"},{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"validationMethod":"DNS"}}}}},"WebBucket":{"id":"WebBucket","path":"Sdg19PrimaryStack/WebBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/WebBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"Sdg19PrimaryStack/WebBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/WebBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"WebBucket12880F5B"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},"/*"]]}]},{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudfront::",{"Ref":"AWS::AccountId"},":distribution/",{"Ref":"WebDistribution59C46482"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["WebBucket12880F5B","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"Sdg19PrimaryStack/WebBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.233.0","metadata":[]},"children":{"Default":{"id":"Default","path":"Sdg19PrimaryStack/WebBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"Sdg19PrimaryStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.233.0"},"children":{"Staging":{"id":"Staging","path":"Sdg19PrimaryStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.233.0"}},"Role":{"id":"Role","path":"Sdg19PrimaryStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}},"Handler":{"id":"Handler","path":"Sdg19PrimaryStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}},"WebAcl":{"id":"WebAcl","path":"Sdg19PrimaryStack/WebAcl","constructInfo":{"fqn":"aws-cdk-lib.aws_wafv2.CfnWebACL","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::WAFv2::WebACL","aws:cdk:cloudformation:props":{"defaultAction":{"allow":{}},"rules":[{"name":"AWSManagedRulesCommonRuleSet","priority":0,"overrideAction":{"none":{}},"statement":{"managedRuleGroupStatement":{"vendorName":"AWS","name":"AWSManagedRulesCommonRuleSet"}},"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"aws-common-rules","sampledRequestsEnabled":true}}],"scope":"CLOUDFRONT","tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"visibilityConfig":{"cloudWatchMetricsEnabled":true,"metricName":"web-acl","sampledRequestsEnabled":true}}}},"WebCachePolicy":{"id":"WebCachePolicy","path":"Sdg19PrimaryStack/WebCachePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CachePolicy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/WebCachePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCachePolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CachePolicy","aws:cdk:cloudformation:props":{"cachePolicyConfig":{"name":"Sdg19PrimaryStackWebCachePolicy5A739DB1-us-east-1","minTtl":3600,"maxTtl":31536000,"defaultTtl":604800,"parametersInCacheKeyAndForwardedToOrigin":{"cookiesConfig":{"cookieBehavior":"none"},"headersConfig":{"headerBehavior":"none"},"enableAcceptEncodingGzip":true,"enableAcceptEncodingBrotli":true,"queryStringsConfig":{"queryStringBehavior":"none"}}}}}}}},"ProductsCachePolicy":{"id":"ProductsCachePolicy","path":"Sdg19PrimaryStack/ProductsCachePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CachePolicy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/ProductsCachePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCachePolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CachePolicy","aws:cdk:cloudformation:props":{"cachePolicyConfig":{"name":"Sdg19PrimaryStackProductsCachePolicy9AF46095-us-east-1","minTtl":0,"maxTtl":86400,"defaultTtl":86400,"parametersInCacheKeyAndForwardedToOrigin":{"cookiesConfig":{"cookieBehavior":"none"},"headersConfig":{"headerBehavior":"none"},"enableAcceptEncodingGzip":true,"enableAcceptEncodingBrotli":true,"queryStringsConfig":{"queryStringBehavior":"all"}}}}}}}},"ApiCorsResponsePolicy":{"id":"ApiCorsResponsePolicy","path":"Sdg19PrimaryStack/ApiCorsResponsePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.ResponseHeadersPolicy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/ApiCorsResponsePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnResponseHeadersPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::ResponseHeadersPolicy","aws:cdk:cloudformation:props":{"responseHeadersPolicyConfig":{"name":"Sdg19PrimaryStackApiCorsResponsePolicyD93B5C38","corsConfig":{"accessControlAllowCredentials":false,"accessControlAllowHeaders":{"items":["authorization","content-type","x-amz-date","x-api-key","x-amz-security-token","x-amz-user-agent"]},"accessControlAllowMethods":{"items":["GET","POST","OPTIONS"]},"accessControlAllowOrigins":{"items":["https://web.example.com"]},"accessControlMaxAgeSec":3600,"originOverride":true}}}}}}},"WebDistribution":{"id":"WebDistribution","path":"Sdg19PrimaryStack/WebDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.233.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"Sdg19PrimaryStack/WebDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"S3OriginAccessControl":{"id":"S3OriginAccessControl","path":"Sdg19PrimaryStack/WebDistribution/Origin1/S3OriginAccessControl","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/WebDistribution/Origin1/S3OriginAccessControl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"name":"Sdg19PrimaryStackWebDistribuOrigin1S3OriginAccessControl5F3B876A","signingBehavior":"always","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/WebDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["WebBucket12880F5B","RegionalDomainName"]},"id":"Sdg19PrimaryStackWebDistributionOrigin1F6D455C8","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["WebDistributionOrigin1S3OriginAccessControl83AD2F73","Id"]}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"Sdg19PrimaryStackWebDistributionOrigin1F6D455C8","cachePolicyId":{"Ref":"WebCachePolicyA235B87B"},"compress":true,"viewerProtocolPolicy":"redirect-to-https"},"aliases":["web.example.com"],"customErrorResponses":[{"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"},{"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2","ipv6Enabled":true,"priceClass":"PriceClass_100","viewerCertificate":{"acmCertificateArn":{"Ref":"Certificate4E7ABB08"},"minimumProtocolVersion":"TLSv1.2_2021","sslSupportMethod":"sni-only"},"webAclId":{"Fn::GetAtt":["WebAcl","Arn"]}},"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}}}},"ApiDistribution":{"id":"ApiDistribution","path":"Sdg19PrimaryStack/ApiDistribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.233.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"Sdg19PrimaryStack/ApiDistribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"}},"Origin2":{"id":"Origin2","path":"Sdg19PrimaryStack/ApiDistribution/Origin2","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/ApiDistribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::Select":[2,{"Fn::Split":["/",{"Fn::GetAtt":["HttpApiF5A9A8A7","ApiEndpoint"]}]}]},"id":"Sdg19PrimaryStackApiDistributionOrigin1FAD0AA1C","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"https-only"}},{"domainName":{"Fn::Select":[2,{"Fn::Split":["/",{"Fn::GetAtt":["HttpApiF5A9A8A7","ApiEndpoint"]}]}]},"id":"Sdg19PrimaryStackApiDistributionOrigin28652E574","customOriginConfig":{"originSslProtocols":["TLSv1.2"],"originProtocolPolicy":"https-only"}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"Sdg19PrimaryStackApiDistributionOrigin1FAD0AA1C","allowedMethods":["GET","HEAD","OPTIONS","PUT","PATCH","POST","DELETE"],"cachePolicyId":"4135ea2d-6df8-44a3-9df3-4b5a84be39ad","compress":true,"originRequestPolicyId":"b689b0a8-53d0-40ab-baf2-68738e2966ac","responseHeadersPolicyId":{"Ref":"ApiCorsResponsePolicy0338CEA0"},"viewerProtocolPolicy":"redirect-to-https"},"aliases":["api.example.com"],"cacheBehaviors":[{"pathPattern":"/products","targetOriginId":"Sdg19PrimaryStackApiDistributionOrigin28652E574","allowedMethods":["GET","HEAD","OPTIONS"],"cachePolicyId":{"Ref":"ProductsCachePolicy6F1FF7B9"},"compress":true,"originRequestPolicyId":"b689b0a8-53d0-40ab-baf2-68738e2966ac","responseHeadersPolicyId":{"Ref":"ApiCorsResponsePolicy0338CEA0"},"viewerProtocolPolicy":"redirect-to-https"}],"httpVersion":"http2","ipv6Enabled":true,"priceClass":"PriceClass_100","viewerCertificate":{"acmCertificateArn":{"Ref":"Certificate4E7ABB08"},"minimumProtocolVersion":"TLSv1.2_2021","sslSupportMethod":"sni-only"},"webAclId":{"Fn::GetAtt":["WebAcl","Arn"]}},"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}}}},"WebAliasRecord":{"id":"WebAliasRecord","path":"Sdg19PrimaryStack/WebAliasRecord","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.ARecord","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/WebAliasRecord/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"aliasTarget":{"hostedZoneId":{"Fn::FindInMap":["AWSCloudFrontPartitionHostedZoneIdMap",{"Ref":"AWS::Partition"},"zoneId"]},"dnsName":{"Fn::GetAtt":["WebDistribution59C46482","DomainName"]}},"hostedZoneId":"Z000000000000","name":"web.example.com.","type":"A"}}}}},"AWSCloudFrontPartitionHostedZoneIdMap":{"id":"AWSCloudFrontPartitionHostedZoneIdMap","path":"Sdg19PrimaryStack/AWSCloudFrontPartitionHostedZoneIdMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"2.233.0"}},"ApiAliasRecord":{"id":"ApiAliasRecord","path":"Sdg19PrimaryStack/ApiAliasRecord","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.ARecord","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/ApiAliasRecord/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"aliasTarget":{"hostedZoneId":{"Fn::FindInMap":["AWSCloudFrontPartitionHostedZoneIdMap",{"Ref":"AWS::Partition"},"zoneId"]},"dnsName":{"Fn::GetAtt":["ApiDistribution1DFA7F7C","DomainName"]}},"hostedZoneId":"Z000000000000","name":"api.example.com.","type":"A"}}}}},"ReplicationRole":{"id":"ReplicationRole","path":"Sdg19PrimaryStack/ReplicationRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.233.0","metadata":[]},"children":{"ImportReplicationRole":{"id":"ImportReplicationRole","path":"Sdg19PrimaryStack/ReplicationRole/ImportReplicationRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/ReplicationRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"s3.amazonaws.com"}}],"Version":"2012-10-17"},"roleName":"Sdg19PrimaryStack-replication-role","tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Sdg19PrimaryStack/ReplicationRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/ReplicationRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:GetReplicationConfiguration","s3:ListBucket","s3:GetObjectVersionForReplication","s3:GetObjectVersionAcl","s3:GetObjectVersionTagging","s3:GetObjectRetention","s3:GetObjectLegalHold"],"Effect":"Allow","Resource":"*"},{"Action":["s3:ReplicateObject","s3:ReplicateDelete","s3:ReplicateTags","s3:ObjectOwnerOverrideToBucketOwner"],"Effect":"Allow","Resource":"*"},{"Action":"kms:Decrypt","Effect":"Allow","Resource":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]}},{"Action":["kms:Decrypt","kms:Encrypt","kms:ReEncrypt*","kms:GenerateDataKey*"],"Effect":"Allow","Resource":{"Fn::GetAtt":["ExportsReader8B249524","/cdk/exports/Sdg19PrimaryStack/Sdg19ReplicaStackuseast2FnGetAttEmailsReplicaKeyF79649DFArn5948744C"]}}],"Version":"2012-10-17"},"policyName":"ReplicationRoleDefaultPolicy80AD15BB","roles":[{"Ref":"ReplicationRoleCE149CEC"}]}}}}}}},"DataBucket":{"id":"DataBucket","path":"Sdg19PrimaryStack/DataBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/DataBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"Sdg19PrimaryStack/DataBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/DataBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"DataBucketE3889A50"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["DataBucketE3889A50","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DataBucketE3889A50","Arn"]},"/*"]]}]},{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["DataBucketE3889A50","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DataBucketE3889A50","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"Sdg19PrimaryStack/DataBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.233.0","metadata":[]},"children":{"Default":{"id":"Default","path":"Sdg19PrimaryStack/DataBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}}}},"OrdersStream":{"id":"OrdersStream","path":"Sdg19PrimaryStack/OrdersStream","constructInfo":{"fqn":"aws-cdk-lib.aws_kinesis.Stream","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrdersStream/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_kinesis.CfnStream","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Kinesis::Stream","aws:cdk:cloudformation:props":{"retentionPeriodHours":24,"streamEncryption":{"encryptionType":"KMS","keyId":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]}},"streamModeDetails":{"streamMode":"ON_DEMAND"},"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}}}},"DataLakeDatabase":{"id":"DataLakeDatabase","path":"Sdg19PrimaryStack/DataLakeDatabase","constructInfo":{"fqn":"aws-cdk-lib.aws_glue.CfnDatabase","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Glue::Database","aws:cdk:cloudformation:props":{"catalogId":"123456789012","databaseInput":{"name":"sdg19_data_lake"}}}},"DataLakeOrdersTable":{"id":"DataLakeOrdersTable","path":"Sdg19PrimaryStack/DataLakeOrdersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_glue.CfnTable","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Glue::Table","aws:cdk:cloudformation:props":{"catalogId":"123456789012","databaseName":{"Ref":"DataLakeDatabase"},"tableInput":{"name":"orders","tableType":"EXTERNAL_TABLE","parameters":{"classification":"parquet"},"partitionKeys":[{"name":"year","type":"string"},{"name":"month","type":"string"},{"name":"day","type":"string"},{"name":"hour","type":"string"}],"storageDescriptor":{"columns":[{"name":"orderId","type":"string"},{"name":"userPk","type":"string"},{"name":"createdAt","type":"string"},{"name":"status","type":"string"},{"name":"total","type":"double"},{"name":"items","type":"string"}],"location":{"Fn::Join":["",["s3://",{"Ref":"DataBucketE3889A50"},"/data-lake/orders/"]]},"inputFormat":"org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat","outputFormat":"org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat","serdeInfo":{"serializationLibrary":"org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe"}}}}}},"OrdersFirehoseRole":{"id":"OrdersFirehoseRole","path":"Sdg19PrimaryStack/OrdersFirehoseRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.233.0","metadata":[]},"children":{"ImportOrdersFirehoseRole":{"id":"ImportOrdersFirehoseRole","path":"Sdg19PrimaryStack/OrdersFirehoseRole/ImportOrdersFirehoseRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrdersFirehoseRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"firehose.amazonaws.com"}}],"Version":"2012-10-17"},"roleName":"OrdersFirehoseRole","tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Sdg19PrimaryStack/OrdersFirehoseRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrdersFirehoseRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["kinesis:DescribeStream","kinesis:DescribeStreamSummary"],"Effect":"Allow","Resource":"*"},{"Action":["kinesis:GetShardIterator","kinesis:GetRecords","kinesis:ListShards"],"Effect":"Allow","Resource":{"Fn::GetAtt":["OrdersStream464CF62B","Arn"]}},{"Action":["s3:AbortMultipartUpload","s3:GetBucketLocation","s3:GetObject","s3:ListBucket","s3:ListBucketMultipartUploads","s3:PutObject"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["DataBucketE3889A50","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DataBucketE3889A50","Arn"]},"/*"]]}]},{"Action":["kms:Decrypt","kms:GenerateDataKey"],"Effect":"Allow","Resource":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]}},{"Action":["glue:GetTable","glue:GetTableVersion","glue:GetTableVersions"],"Effect":"Allow","Resource":["arn:aws:glue:us-east-1:123456789012:catalog",{"Fn::Join":["",["arn:aws:glue:us-east-1:123456789012:database/",{"Ref":"DataLakeDatabase"}]]},{"Fn::Join":["",["arn:aws:glue:us-east-1:123456789012:table/",{"Ref":"DataLakeDatabase"},"/",{"Ref":"DataLakeOrdersTable"}]]}]},{"Action":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"OrdersFirehoseRoleDefaultPolicy22D47B42","roles":[{"Ref":"OrdersFirehoseRoleEE9F194E"}]}}}}}}},"OrdersFirehoseLogs":{"id":"OrdersFirehoseLogs","path":"Sdg19PrimaryStack/OrdersFirehoseLogs","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrdersFirehoseLogs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":30,"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}}}},"OrdersFirehose":{"id":"OrdersFirehose","path":"Sdg19PrimaryStack/OrdersFirehose","constructInfo":{"fqn":"aws-cdk-lib.aws_kinesisfirehose.CfnDeliveryStream","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::KinesisFirehose::DeliveryStream","aws:cdk:cloudformation:props":{"deliveryStreamName":"OrdersFireHose","deliveryStreamType":"KinesisStreamAsSource","extendedS3DestinationConfiguration":{"bucketArn":{"Fn::GetAtt":["DataBucketE3889A50","Arn"]},"roleArn":{"Fn::GetAtt":["OrdersFirehoseRoleEE9F194E","Arn"]},"prefix":"data-lake/orders/!{partitionKeyFromQuery:year}/!{partitionKeyFromQuery:month}/!{partitionKeyFromQuery:day}/!{partitionKeyFromQuery:hour}/","errorOutputPrefix":"data-lake/errors/","compressionFormat":"UNCOMPRESSED","bufferingHints":{"intervalInSeconds":300,"sizeInMBs":64},"processingConfiguration":{"enabled":true,"processors":[{"type":"MetadataExtraction","parameters":[{"parameterName":"MetadataExtractionQuery","parameterValue":"{year: .createdAt[0:4], month: .createdAt[5:7], day: .createdAt[8:10], hour: .createdAt[11:13]}"},{"parameterName":"JsonParsingEngine","parameterValue":"JQ-1.6"}]}]},"dynamicPartitioningConfiguration":{"enabled":true,"retryOptions":{"durationInSeconds":300}},"dataFormatConversionConfiguration":{"enabled":true,"inputFormatConfiguration":{"deserializer":{"openXJsonSerDe":{}}},"outputFormatConfiguration":{"serializer":{"parquetSerDe":{}}},"schemaConfiguration":{"databaseName":{"Ref":"DataLakeDatabase"},"tableName":{"Ref":"DataLakeOrdersTable"},"roleArn":{"Fn::GetAtt":["OrdersFirehoseRoleEE9F194E","Arn"]},"region":"us-east-1","catalogId":"123456789012"}},"cloudWatchLoggingOptions":{"enabled":true,"logGroupName":{"Ref":"OrdersFirehoseLogs3E6CDFB5"},"logStreamName":"S3Delivery"}},"kinesisStreamSourceConfiguration":{"kinesisStreamArn":{"Fn::GetAtt":["OrdersStream464CF62B","Arn"]},"roleArn":{"Fn::GetAtt":["OrdersFirehoseRoleEE9F194E","Arn"]}},"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"LogsBucket":{"id":"LogsBucket","path":"Sdg19PrimaryStack/LogsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/LogsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":30,"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"Sdg19PrimaryStack/LogsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/LogsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"LogsBucket9C4D8843"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["LogsBucket9C4D8843","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["LogsBucket9C4D8843","Arn"]},"/*"]]}]},{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["LogsBucket9C4D8843","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["LogsBucket9C4D8843","Arn"]},"/*"]]}]},{"Action":"s3:GetBucketAcl","Effect":"Allow","Principal":{"Service":"cloudtrail.amazonaws.com"},"Resource":{"Fn::GetAtt":["LogsBucket9C4D8843","Arn"]}},{"Action":"s3:PutObject","Condition":{"StringEquals":{"s3:x-amz-acl":"bucket-owner-full-control"}},"Effect":"Allow","Principal":{"Service":"cloudtrail.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["LogsBucket9C4D8843","Arn"]},"/AWSLogs/123456789012/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"Sdg19PrimaryStack/LogsBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.233.0","metadata":[]},"children":{"Default":{"id":"Default","path":"Sdg19PrimaryStack/LogsBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}}}},"EmailsBucket":{"id":"EmailsBucket","path":"Sdg19PrimaryStack/EmailsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/EmailsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"aws:kms","kmsMasterKeyId":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]}}}]},"lifecycleConfiguration":{"rules":[{"expirationInDays":3650,"status":"Enabled","transitions":[{"storageClass":"GLACIER","transitionInDays":365}]}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"replicationConfiguration":{"role":{"Fn::GetAtt":["ReplicationRoleCE149CEC","Arn"]},"rules":[{"id":"EmailsReplication","priority":1,"status":"Enabled","destination":{"bucket":{"Fn::GetAtt":["ExportsReader8B249524","/cdk/exports/Sdg19PrimaryStack/Sdg19ReplicaStackuseast2FnGetAttEmailsReplicaBucket67B3049CArnA42F7D5C"]},"storageClass":"INTELLIGENT_TIERING","encryptionConfiguration":{"replicaKmsKeyId":{"Fn::GetAtt":["ExportsReader8B249524","/cdk/exports/Sdg19PrimaryStack/Sdg19ReplicaStackuseast2FnGetAttEmailsReplicaKeyF79649DFArn5948744C"]}},"replicationTime":{"status":"Enabled","time":{"minutes":15}},"metrics":{"status":"Enabled","eventThreshold":{"minutes":15}}},"filter":{"prefix":""},"deleteMarkerReplication":{"status":"Enabled"},"sourceSelectionCriteria":{"sseKmsEncryptedObjects":{"status":"Enabled"}}}]},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"Sdg19PrimaryStack/EmailsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/EmailsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"EmailsBucket616D9B95"},"policyDocument":{"Statement":[{"Action":"s3:*","Condition":{"Bool":{"aws:SecureTransport":"false"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":[{"Fn::GetAtt":["EmailsBucket616D9B95","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailsBucket616D9B95","Arn"]},"/*"]]}]},{"Action":["s3:PutBucketPolicy","s3:GetBucket*","s3:List*","s3:DeleteObject*"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["EmailsBucket616D9B95","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EmailsBucket616D9B95","Arn"]},"/*"]]}]},{"Action":"s3:PutObject","Condition":{"StringNotEquals":{"s3:x-amz-server-side-encryption":"aws:kms"}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["EmailsBucket616D9B95","Arn"]},"/*"]]},"Sid":"DenyUnencryptedEmailUploads"},{"Action":"s3:PutObject","Condition":{"StringNotEquals":{"s3:x-amz-server-side-encryption-aws-kms-key-id":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]}}},"Effect":"Deny","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["EmailsBucket616D9B95","Arn"]},"/*"]]},"Sid":"DenyWrongKmsKeyForEmailUploads"}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"Sdg19PrimaryStack/EmailsBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.233.0","metadata":[]},"children":{"Default":{"id":"Default","path":"Sdg19PrimaryStack/EmailsBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}}}},"EmailsBucketSizeAlarm":{"id":"EmailsBucketSizeAlarm","path":"Sdg19PrimaryStack/EmailsBucketSizeAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/EmailsBucketSizeAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"comparisonOperator":"GreaterThanThreshold","dimensions":[{"name":"BucketName","value":{"Ref":"EmailsBucket616D9B95"}},{"name":"StorageType","value":"StandardStorage"}],"evaluationPeriods":1,"metricName":"BucketSizeBytes","namespace":"AWS/S3","period":86400,"statistic":"Average","threshold":5368709120,"treatMissingData":"notBreaching"}}}}},"EmailsReplicationBytesPendingAlarm":{"id":"EmailsReplicationBytesPendingAlarm","path":"Sdg19PrimaryStack/EmailsReplicationBytesPendingAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/EmailsReplicationBytesPendingAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"BucketName","value":{"Ref":"EmailsBucket616D9B95"}},{"name":"RuleId","value":"EmailsReplication"}],"evaluationPeriods":1,"metricName":"BytesPendingReplication","namespace":"AWS/S3","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"EmailsReplicationOpsPendingAlarm":{"id":"EmailsReplicationOpsPendingAlarm","path":"Sdg19PrimaryStack/EmailsReplicationOpsPendingAlarm","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.Alarm","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/EmailsReplicationOpsPendingAlarm/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudwatch.CfnAlarm","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudWatch::Alarm","aws:cdk:cloudformation:props":{"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"comparisonOperator":"GreaterThanOrEqualToThreshold","dimensions":[{"name":"BucketName","value":{"Ref":"EmailsBucket616D9B95"}},{"name":"RuleId","value":"EmailsReplication"}],"evaluationPeriods":1,"metricName":"OperationsPendingReplication","namespace":"AWS/S3","period":300,"statistic":"Sum","threshold":1,"treatMissingData":"notBreaching"}}}}},"SesDomainIdentity":{"id":"SesDomainIdentity","path":"Sdg19PrimaryStack/SesDomainIdentity","constructInfo":{"fqn":"aws-cdk-lib.aws_ses.EmailIdentity","version":"2.233.0","metadata":[]},"children":{"DkimDnsToken1":{"id":"DkimDnsToken1","path":"Sdg19PrimaryStack/SesDomainIdentity/DkimDnsToken1","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"hostedZoneId":"Z000000000000","name":{"Fn::GetAtt":["SesDomainIdentity9A66B56D","DkimDNSTokenName1"]},"resourceRecords":[{"Fn::GetAtt":["SesDomainIdentity9A66B56D","DkimDNSTokenValue1"]}],"ttl":"1800","type":"CNAME"}}},"DkimDnsToken2":{"id":"DkimDnsToken2","path":"Sdg19PrimaryStack/SesDomainIdentity/DkimDnsToken2","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"hostedZoneId":"Z000000000000","name":{"Fn::GetAtt":["SesDomainIdentity9A66B56D","DkimDNSTokenName2"]},"resourceRecords":[{"Fn::GetAtt":["SesDomainIdentity9A66B56D","DkimDNSTokenValue2"]}],"ttl":"1800","type":"CNAME"}}},"DkimDnsToken3":{"id":"DkimDnsToken3","path":"Sdg19PrimaryStack/SesDomainIdentity/DkimDnsToken3","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"hostedZoneId":"Z000000000000","name":{"Fn::GetAtt":["SesDomainIdentity9A66B56D","DkimDNSTokenName3"]},"resourceRecords":[{"Fn::GetAtt":["SesDomainIdentity9A66B56D","DkimDNSTokenValue3"]}],"ttl":"1800","type":"CNAME"}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/SesDomainIdentity/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_ses.CfnEmailIdentity","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SES::EmailIdentity","aws:cdk:cloudformation:props":{"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"emailIdentity":"example.com","mailFromAttributes":{"mailFromDomain":"mail.example.com"}}}},"MailFromMxRecord":{"id":"MailFromMxRecord","path":"Sdg19PrimaryStack/SesDomainIdentity/MailFromMxRecord","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.MxRecord","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/SesDomainIdentity/MailFromMxRecord/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"hostedZoneId":"Z000000000000","name":"mail.example.com.","resourceRecords":["10 feedback-smtp.us-east-1.amazonses.com"],"ttl":"1800","type":"MX"}}}}},"MailFromTxtRecord":{"id":"MailFromTxtRecord","path":"Sdg19PrimaryStack/SesDomainIdentity/MailFromTxtRecord","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.TxtRecord","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/SesDomainIdentity/MailFromTxtRecord/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"hostedZoneId":"Z000000000000","name":"mail.example.com.","resourceRecords":["\"v=spf1 include:amazonses.com ~all\""],"ttl":"1800","type":"TXT"}}}}}}},"OrderEmailTemplate":{"id":"OrderEmailTemplate","path":"Sdg19PrimaryStack/OrderEmailTemplate","constructInfo":{"fqn":"aws-cdk-lib.aws_ses.CfnTemplate","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SES::Template","aws:cdk:cloudformation:props":{"template":{"templateName":"sdg19-order-confirmation","subjectPart":"Confirmacin de orden {{orderId}}","htmlPart":"\n          <!doctype html>\n          <html lang=\"es\">\n            <head>\n              <meta charset=\"utf-8\" />\n              <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n              <title>Orden {{orderId}}</title>\n            </head>\n\n            <body style=\"margin:0;padding:0;background:#f6f7f9;\">\n              <!-- Preheader -->\n              <div style=\"display:none;max-height:0;overflow:hidden;opacity:0;color:transparent;\">\n                Confirmacin de orden {{orderId}} ({{status}}). Total $ {{total}}.\n              </div>\n\n              <table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"background:#f6f7f9;\">\n                <tr>\n                  <td align=\"center\" style=\"padding:24px 12px;\">\n                    <table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\"\n                      style=\"max-width:640px;background:#ffffff;border-radius:16px;overflow:hidden;box-shadow:0 8px 24px rgba(16,24,40,.08);\">\n\n                      <!-- Header -->\n                      <tr>\n                        <td style=\"padding:28px 28px 16px 28px;\">\n                          <div style=\"font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:14px;color:#667085;\">\n                            Gracias por tu orden\n                          </div>\n                          <div style=\"margin-top:10px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:22px;font-weight:800;color:#101828;line-height:1.25;\">\n                            Confirmacin de compra\n                          </div>\n                          <div style=\"margin-top:10px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:14px;color:#475467;line-height:1.6;\">\n                            Recibimos tu orden y la estamos procesando. Aqu estn los detalles:\n                          </div>\n                        </td>\n                      </tr>\n\n                      <!-- Divider -->\n                      <tr>\n                        <td style=\"padding:0 28px;\">\n                          <div style=\"height:1px;background:#eaecf0;width:100%;\"></div>\n                        </td>\n                      </tr>\n\n                      <!-- Summary -->\n                      <tr>\n                        <td style=\"padding:18px 28px 10px 28px;\">\n                          <table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\n                            <tr>\n                              <td style=\"padding:10px 0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;letter-spacing:.04em;text-transform:uppercase;color:#667085;\">\n                                Orden\n                              </td>\n                              <td align=\"right\" style=\"padding:10px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono','Courier New',monospace;font-size:12px;color:#101828;\">\n                                {{orderId}}\n                              </td>\n                            </tr>\n\n                            <tr>\n                              <td style=\"padding:10px 0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;letter-spacing:.04em;text-transform:uppercase;color:#667085;\">\n                                Estado\n                              </td>\n                              <td align=\"right\" style=\"padding:10px 0;\">\n                                <span style=\"display:inline-block;padding:6px 10px;border-radius:999px;background:#f2f4f7;color:#344054;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;font-weight:700;\">\n                                  {{status}}\n                                </span>\n                              </td>\n                            </tr>\n\n                            <tr>\n                              <td style=\"padding:12px 0 2px 0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;letter-spacing:.04em;text-transform:uppercase;color:#667085;\">\n                                Total\n                              </td>\n                              <td align=\"right\" style=\"padding:12px 0 2px 0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:20px;font-weight:900;color:#101828;\">\n                                $ {{total}}\n                              </td>\n                            </tr>\n                          </table>\n                        </td>\n                      </tr>\n\n                      <!-- Items -->\n                      <tr>\n                        <td style=\"padding:0 28px 18px 28px;\">\n                          <div style=\"height:1px;background:#eaecf0;width:100%;\"></div>\n                        </td>\n                      </tr>\n\n                      <tr>\n                        <td style=\"padding:18px 28px 6px 28px;\">\n                          <div style=\"font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;letter-spacing:.04em;text-transform:uppercase;color:#667085;\">\n                            Productos\n                          </div>\n                        </td>\n                      </tr>\n\n                      <tr>\n                        <td style=\"padding:0 28px 22px 28px;\">\n                          <table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\"\n                            style=\"border-collapse:separate;border-spacing:0 10px;\">\n                            {{{itemsHtml}}}\n                          </table>\n\n                          <div style=\"margin-top:8px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;color:#98a2b3;line-height:1.6;\">\n                            Nota: Los tiempos de entrega pueden variar segn disponibilidad.\n                          </div>\n                        </td>\n                      </tr>\n\n                      <!-- Footer -->\n                      <tr>\n                        <td style=\"padding:18px 28px 26px 28px;background:#fcfcfd;\">\n                          <div style=\"font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;color:#667085;line-height:1.6;\">\n                            Este correo fue generado automticamente. Si no reconoces esta orden, ignora este mensaje.\n                          </div>\n                          <div style=\"margin-top:10px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;color:#98a2b3;\">\n                             {{year}} sdg19 proyecto final\n                          </div>\n                        </td>\n                      </tr>\n\n                    </table>\n                  </td>\n                </tr>\n              </table>\n            </body>\n          </html>\n        ","textPart":"Gracias por tu orden {{orderId}}. Estado: {{status}}. Total: $ {{total}}."}}}},"OrderEmailFn":{"id":"OrderEmailFn","path":"Sdg19PrimaryStack/OrderEmailFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.233.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Sdg19PrimaryStack/OrderEmailFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.233.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Sdg19PrimaryStack/OrderEmailFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrderEmailFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Sdg19PrimaryStack/OrderEmailFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrderEmailFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords"],"Effect":"Allow","Resource":"*"},{"Action":["sqs:ReceiveMessage","sqs:ChangeMessageVisibility","sqs:GetQueueUrl","sqs:DeleteMessage","sqs:GetQueueAttributes"],"Effect":"Allow","Resource":{"Fn::GetAtt":["OrdersQueue3DFA1D51","Arn"]}},{"Action":"kms:Decrypt","Effect":"Allow","Resource":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]}},{"Action":"s3:PutObject","Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::GetAtt":["EmailsBucket616D9B95","Arn"]},"/*"]]}},{"Action":["kms:Encrypt","kms:GenerateDataKey"],"Effect":"Allow","Resource":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]}},{"Action":["ses:SendTemplatedEmail","ses:SendEmail"],"Condition":{"StringEquals":{"ses:FromAddress":"no-reply@example.com"}},"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"OrderEmailFnServiceRoleDefaultPolicy24A9A9C7","roles":[{"Ref":"OrderEmailFnServiceRole59C3C6B3"}]}}}}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrderEmailFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-bootstrap-assets-123456789012-us-east-1","s3Key":"666b9003783f246672770c7faa594fb3127c9428ed9d7ced196f1658a3844054.zip"},"environment":{"variables":{"EMAILS_BUCKET_NAME":{"Ref":"EmailsBucket616D9B95"},"SES_TEMPLATE_NAME":"sdg19-order-confirmation","SES_FROM_ADDRESS":"no-reply@example.com","EMAILS_BUCKET_KMS_KEY_ID":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]}}},"handler":"main.orderEmailHandler","role":{"Fn::GetAtt":["OrderEmailFnServiceRole59C3C6B3","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"timeout":15,"tracingConfig":{"mode":"Active"}}}},"SqsEventSource:Sdg19PrimaryStackOrdersQueueFA8EDFFA":{"id":"SqsEventSource:Sdg19PrimaryStackOrdersQueueFA8EDFFA","path":"Sdg19PrimaryStack/OrderEmailFn/SqsEventSource:Sdg19PrimaryStackOrdersQueueFA8EDFFA","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrderEmailFn/SqsEventSource:Sdg19PrimaryStackOrdersQueueFA8EDFFA/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":10,"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"eventSourceArn":{"Fn::GetAtt":["OrdersQueue3DFA1D51","Arn"]},"functionName":{"Ref":"OrderEmailFn25E3BD4D"}}}}}}}},"OrderLakeFn":{"id":"OrderLakeFn","path":"Sdg19PrimaryStack/OrderLakeFn","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.233.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"Sdg19PrimaryStack/OrderLakeFn/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.233.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"Sdg19PrimaryStack/OrderLakeFn/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrderLakeFn/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Sdg19PrimaryStack/OrderLakeFn/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrderLakeFn/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords"],"Effect":"Allow","Resource":"*"},{"Action":["sqs:ReceiveMessage","sqs:ChangeMessageVisibility","sqs:GetQueueUrl","sqs:DeleteMessage","sqs:GetQueueAttributes"],"Effect":"Allow","Resource":{"Fn::GetAtt":["OrdersLakeQueue83376934","Arn"]}},{"Action":"kms:Decrypt","Effect":"Allow","Resource":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]}},{"Action":["kinesis:PutRecord","kinesis:PutRecords"],"Effect":"Allow","Resource":{"Fn::GetAtt":["OrdersStream464CF62B","Arn"]}},{"Action":["kms:Decrypt","kms:GenerateDataKey"],"Effect":"Allow","Resource":{"Fn::GetAtt":["DataKey17AFBB84","Arn"]}}],"Version":"2012-10-17"},"policyName":"OrderLakeFnServiceRoleDefaultPolicyD1CC19E7","roles":[{"Ref":"OrderLakeFnServiceRole340128DE"}]}}}}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrderLakeFn/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-bootstrap-assets-123456789012-us-east-1","s3Key":"666b9003783f246672770c7faa594fb3127c9428ed9d7ced196f1658a3844054.zip"},"environment":{"variables":{"KINESIS_STREAM_NAME":{"Ref":"OrdersStream464CF62B"}}},"handler":"main.orderLakeHandler","role":{"Fn::GetAtt":["OrderLakeFnServiceRole340128DE","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"timeout":10,"tracingConfig":{"mode":"Active"}}}},"SqsEventSource:Sdg19PrimaryStackOrdersLakeQueueEEE155E5":{"id":"SqsEventSource:Sdg19PrimaryStackOrdersLakeQueueEEE155E5","path":"Sdg19PrimaryStack/OrderLakeFn/SqsEventSource:Sdg19PrimaryStackOrdersLakeQueueEEE155E5","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.EventSourceMapping","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/OrderLakeFn/SqsEventSource:Sdg19PrimaryStackOrdersLakeQueueEEE155E5/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnEventSourceMapping","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::EventSourceMapping","aws:cdk:cloudformation:props":{"batchSize":10,"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}],"eventSourceArn":{"Fn::GetAtt":["OrdersLakeQueue83376934","Arn"]},"functionName":{"Ref":"OrderLakeFnF5943FA5"},"functionResponseTypes":["ReportBatchItemFailures"]}}}}}}},"CloudTrailLogs":{"id":"CloudTrailLogs","path":"Sdg19PrimaryStack/CloudTrailLogs","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/CloudTrailLogs/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":30,"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}}}},"CloudTrail":{"id":"CloudTrail","path":"Sdg19PrimaryStack/CloudTrail","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudtrail.Trail","version":"2.233.0","metadata":[]},"children":{"LogsRole":{"id":"LogsRole","path":"Sdg19PrimaryStack/CloudTrail/LogsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.233.0","metadata":[]},"children":{"ImportLogsRole":{"id":"ImportLogsRole","path":"Sdg19PrimaryStack/CloudTrail/LogsRole/ImportLogsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.233.0","metadata":[]}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/CloudTrail/LogsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"cloudtrail.amazonaws.com"}}],"Version":"2012-10-17"},"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"Sdg19PrimaryStack/CloudTrail/LogsRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.233.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/CloudTrail/LogsRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:PutLogEvents","logs:CreateLogStream"],"Effect":"Allow","Resource":{"Fn::GetAtt":["CloudTrailLogsBBCFF69F","Arn"]}}],"Version":"2012-10-17"},"policyName":"CloudTrailLogsRoleDefaultPolicyD9019B15","roles":[{"Ref":"CloudTrailLogsRole9F6E6663"}]}}}}}}},"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/CloudTrail/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudtrail.CfnTrail","version":"2.233.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudTrail::Trail","aws:cdk:cloudformation:props":{"cloudWatchLogsLogGroupArn":{"Fn::GetAtt":["CloudTrailLogsBBCFF69F","Arn"]},"cloudWatchLogsRoleArn":{"Fn::GetAtt":["CloudTrailLogsRole9F6E6663","Arn"]},"enableLogFileValidation":true,"eventSelectors":[],"includeGlobalServiceEvents":true,"isLogging":true,"isMultiRegionTrail":true,"s3BucketName":{"Ref":"LogsBucket9C4D8843"},"tags":[{"key":"project","value":"sdg19-final"},{"key":"reason","value":"sdg19"}]}}}}},"ApiUrl":{"id":"ApiUrl","path":"Sdg19PrimaryStack/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.233.0"}},"UserPoolId":{"id":"UserPoolId","path":"Sdg19PrimaryStack/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.233.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"Sdg19PrimaryStack/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.233.0"}},"TableName":{"id":"TableName","path":"Sdg19PrimaryStack/TableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.233.0"}},"WebBucketName":{"id":"WebBucketName","path":"Sdg19PrimaryStack/WebBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.233.0"}},"WebDistributionId":{"id":"WebDistributionId","path":"Sdg19PrimaryStack/WebDistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.233.0"}},"DataBucketName":{"id":"DataBucketName","path":"Sdg19PrimaryStack/DataBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.233.0"}},"EmailsBucketName":{"id":"EmailsBucketName","path":"Sdg19PrimaryStack/EmailsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.233.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"Sdg19PrimaryStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Default":{"id":"Default","path":"Sdg19PrimaryStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}},"ExportsReader":{"id":"ExportsReader","path":"Sdg19PrimaryStack/ExportsReader","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"},"children":{"Resource":{"id":"Resource","path":"Sdg19PrimaryStack/ExportsReader/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.233.0","metadata":[]},"children":{"Default":{"id":"Default","path":"Sdg19PrimaryStack/ExportsReader/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}}}},"Custom::CrossRegionExportReaderCustomResourceProvider":{"id":"Custom::CrossRegionExportReaderCustomResourceProvider","path":"Sdg19PrimaryStack/Custom::CrossRegionExportReaderCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.233.0"},"children":{"Staging":{"id":"Staging","path":"Sdg19PrimaryStack/Custom::CrossRegionExportReaderCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.233.0"}},"Role":{"id":"Role","path":"Sdg19PrimaryStack/Custom::CrossRegionExportReaderCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}},"Handler":{"id":"Handler","path":"Sdg19PrimaryStack/Custom::CrossRegionExportReaderCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.233.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"Sdg19PrimaryStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.233.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"Sdg19PrimaryStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.233.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.4"}}}}}