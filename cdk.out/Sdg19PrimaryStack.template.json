{
 "Resources": {
  "DataKey17AFBB84": {
   "Type": "AWS::KMS::Key",
   "Properties": {
    "EnableKeyRotation": true,
    "KeyPolicy": {
     "Statement": [
      {
       "Action": "kms:*",
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::Join": [
          "",
          [
           "arn:",
           {
            "Ref": "AWS::Partition"
           },
           ":iam::123456789012:root"
          ]
         ]
        }
       },
       "Resource": "*"
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:GenerateDataKey"
       ],
       "Effect": "Allow",
       "Principal": {
        "Service": "sns.amazonaws.com"
       },
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/DataKey/Resource"
   }
  },
  "MainTable74195DAB": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "PK",
      "AttributeType": "S"
     },
     {
      "AttributeName": "SK",
      "AttributeType": "S"
     },
     {
      "AttributeName": "GSI1PK",
      "AttributeType": "S"
     },
     {
      "AttributeName": "GSI1SK",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "GSI1",
      "KeySchema": [
       {
        "AttributeName": "GSI1PK",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "GSI1SK",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "PK",
      "KeyType": "HASH"
     },
     {
      "AttributeName": "SK",
      "KeyType": "RANGE"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "SSESpecification": {
     "KMSMasterKeyId": {
      "Fn::GetAtt": [
       "DataKey17AFBB84",
       "Arn"
      ]
     },
     "SSEEnabled": true,
     "SSEType": "KMS"
    },
    "StreamSpecification": {
     "StreamViewType": "NEW_IMAGE"
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/MainTable/Resource"
   }
  },
  "OrdersTopic47790A41": {
   "Type": "AWS::SNS::Topic",
   "Properties": {
    "KmsMasterKeyId": {
     "Fn::GetAtt": [
      "DataKey17AFBB84",
      "Arn"
     ]
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrdersTopic/Resource"
   }
  },
  "OrdersQueueDLQB05DAA0E": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "KmsMasterKeyId": {
     "Fn::GetAtt": [
      "DataKey17AFBB84",
      "Arn"
     ]
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrdersQueueDLQ/Resource"
   }
  },
  "OrdersQueue3DFA1D51": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "KmsMasterKeyId": {
     "Fn::GetAtt": [
      "DataKey17AFBB84",
      "Arn"
     ]
    },
    "RedrivePolicy": {
     "deadLetterTargetArn": {
      "Fn::GetAtt": [
       "OrdersQueueDLQB05DAA0E",
       "Arn"
      ]
     },
     "maxReceiveCount": 5
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "VisibilityTimeout": 90
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrdersQueue/Resource"
   }
  },
  "OrdersQueuePolicy060934B1": {
   "Type": "AWS::SQS::QueuePolicy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:SendMessage",
       "Condition": {
        "ArnEquals": {
         "aws:SourceArn": {
          "Ref": "OrdersTopic47790A41"
         }
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": "sns.amazonaws.com"
       },
       "Resource": {
        "Fn::GetAtt": [
         "OrdersQueue3DFA1D51",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Queues": [
     {
      "Ref": "OrdersQueue3DFA1D51"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrdersQueue/Policy/Resource"
   }
  },
  "OrdersQueueSdg19PrimaryStackOrdersTopic30D02781786D76E2": {
   "Type": "AWS::SNS::Subscription",
   "Properties": {
    "Endpoint": {
     "Fn::GetAtt": [
      "OrdersQueue3DFA1D51",
      "Arn"
     ]
    },
    "Protocol": "sqs",
    "RawMessageDelivery": false,
    "TopicArn": {
     "Ref": "OrdersTopic47790A41"
    }
   },
   "DependsOn": [
    "OrdersQueuePolicy060934B1"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrdersQueue/Sdg19PrimaryStackOrdersTopic30D02781/Resource"
   }
  },
  "OrdersLakeQueueDLQ7E963BA6": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "KmsMasterKeyId": {
     "Fn::GetAtt": [
      "DataKey17AFBB84",
      "Arn"
     ]
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrdersLakeQueueDLQ/Resource"
   }
  },
  "OrdersLakeQueue83376934": {
   "Type": "AWS::SQS::Queue",
   "Properties": {
    "KmsMasterKeyId": {
     "Fn::GetAtt": [
      "DataKey17AFBB84",
      "Arn"
     ]
    },
    "RedrivePolicy": {
     "deadLetterTargetArn": {
      "Fn::GetAtt": [
       "OrdersLakeQueueDLQ7E963BA6",
       "Arn"
      ]
     },
     "maxReceiveCount": 5
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "VisibilityTimeout": 60
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrdersLakeQueue/Resource"
   }
  },
  "OrdersLakeQueuePolicy2F5C0EB3": {
   "Type": "AWS::SQS::QueuePolicy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "sqs:SendMessage",
       "Condition": {
        "ArnEquals": {
         "aws:SourceArn": {
          "Ref": "OrdersTopic47790A41"
         }
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": "sns.amazonaws.com"
       },
       "Resource": {
        "Fn::GetAtt": [
         "OrdersLakeQueue83376934",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Queues": [
     {
      "Ref": "OrdersLakeQueue83376934"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrdersLakeQueue/Policy/Resource"
   }
  },
  "OrdersLakeQueueSdg19PrimaryStackOrdersTopic30D027812DF45777": {
   "Type": "AWS::SNS::Subscription",
   "Properties": {
    "Endpoint": {
     "Fn::GetAtt": [
      "OrdersLakeQueue83376934",
      "Arn"
     ]
    },
    "Protocol": "sqs",
    "RawMessageDelivery": false,
    "TopicArn": {
     "Ref": "OrdersTopic47790A41"
    }
   },
   "DependsOn": [
    "OrdersLakeQueuePolicy2F5C0EB3"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrdersLakeQueue/Sdg19PrimaryStackOrdersTopic30D02781/Resource"
   }
  },
  "UserPool6BA7E5F2": {
   "Type": "AWS::Cognito::UserPool",
   "Properties": {
    "AccountRecoverySetting": {
     "RecoveryMechanisms": [
      {
       "Name": "verified_email",
       "Priority": 1
      }
     ]
    },
    "AdminCreateUserConfig": {
     "AllowAdminCreateUserOnly": false
    },
    "AutoVerifiedAttributes": [],
    "EmailVerificationMessage": "The verification code to your new account is {####}",
    "EmailVerificationSubject": "Verify your new account",
    "Policies": {
     "PasswordPolicy": {
      "MinimumLength": 10,
      "RequireLowercase": true,
      "RequireNumbers": true,
      "RequireSymbols": true,
      "RequireUppercase": true
     }
    },
    "SmsVerificationMessage": "The verification code to your new account is {####}",
    "UserPoolTags": {
     "project": "sdg19-final",
     "reason": "sdg19"
    },
    "UsernameAttributes": [
     "email"
    ],
    "VerificationMessageTemplate": {
     "DefaultEmailOption": "CONFIRM_WITH_CODE",
     "EmailMessage": "The verification code to your new account is {####}",
     "EmailSubject": "Verify your new account",
     "SmsMessage": "The verification code to your new account is {####}"
    }
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/UserPool/Resource"
   }
  },
  "UserPoolClient2F5918F7": {
   "Type": "AWS::Cognito::UserPoolClient",
   "Properties": {
    "AllowedOAuthFlows": [
     "implicit",
     "code"
    ],
    "AllowedOAuthFlowsUserPoolClient": true,
    "AllowedOAuthScopes": [
     "profile",
     "phone",
     "email",
     "openid",
     "aws.cognito.signin.user.admin"
    ],
    "CallbackURLs": [
     "https://example.com"
    ],
    "ExplicitAuthFlows": [
     "ALLOW_USER_PASSWORD_AUTH",
     "ALLOW_USER_SRP_AUTH",
     "ALLOW_REFRESH_TOKEN_AUTH"
    ],
    "GenerateSecret": false,
    "SupportedIdentityProviders": [
     "COGNITO"
    ],
    "UserPoolId": {
     "Ref": "UserPool6BA7E5F2"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/UserPoolClient/Resource"
   }
  },
  "ApiAccessLogsE9DF007D": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "RetentionInDays": 30,
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ApiAccessLogs/Resource"
   }
  },
  "ApiAccessLogsPolicyResourcePolicy4D577253": {
   "Type": "AWS::Logs::ResourcePolicy",
   "Properties": {
    "PolicyDocument": {
     "Fn::Join": [
      "",
      [
       "{\"Statement\":[{\"Action\":[\"logs:CreateLogStream\",\"logs:PutLogEvents\"],\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"},\"Resource\":[\"",
       {
        "Fn::GetAtt": [
         "ApiAccessLogsE9DF007D",
         "Arn"
        ]
       },
       "\",\"",
       {
        "Fn::GetAtt": [
         "ApiAccessLogsE9DF007D",
         "Arn"
        ]
       },
       ":*\"]}],\"Version\":\"2012-10-17\"}"
      ]
     ]
    },
    "PolicyName": "Sdg19PrimaryStackApiAccessLogsPolicy346716C4"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ApiAccessLogs/Policy/ResourcePolicy"
   }
  },
  "HttpApiF5A9A8A7": {
   "Type": "AWS::ApiGatewayV2::Api",
   "Properties": {
    "CorsConfiguration": {
     "AllowHeaders": [
      "authorization",
      "content-type",
      "x-amz-date",
      "x-api-key",
      "x-amz-security-token",
      "x-amz-user-agent"
     ],
     "AllowMethods": [
      "GET",
      "POST",
      "OPTIONS"
     ],
     "AllowOrigins": [
      "https://web.example.com"
     ]
    },
    "Name": "sdg19-api",
    "ProtocolType": "HTTP",
    "Tags": {
     "project": "sdg19-final",
     "reason": "sdg19"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/Resource"
   }
  },
  "HttpApidefault62F57253": {
   "Type": "AWS::ApiGatewayV2::Stage",
   "Properties": {
    "AccessLogSettings": {
     "DestinationArn": {
      "Fn::GetAtt": [
       "ApiAccessLogsE9DF007D",
       "Arn"
      ]
     },
     "Format": "{\"requestId\":\"$context.requestId\",\"ip\":\"$context.identity.sourceIp\",\"user\":\"$context.identity.user\",\"caller\":\"$context.identity.caller\",\"requestTime\":\"$context.requestTime\",\"httpMethod\":\"$context.httpMethod\",\"resourcePath\":\"$context.resourcePath\",\"status\":\"$context.status\",\"protocol\":\"$context.protocol\",\"responseLength\":\"$context.responseLength\"}"
    },
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "AutoDeploy": true,
    "StageName": "$default",
    "Tags": {
     "project": "sdg19-final",
     "reason": "sdg19"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/$default/Resource"
   }
  },
  "HttpApiPOSTauthregisterRegisterIntegrationC123DAC5": {
   "Type": "AWS::ApiGatewayV2::Integration",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "IntegrationType": "AWS_PROXY",
    "IntegrationUri": {
     "Fn::GetAtt": [
      "RegisterFnA997AE2F",
      "Arn"
     ]
    },
    "PayloadFormatVersion": "2.0"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/POST--auth--register/RegisterIntegration/Resource"
   }
  },
  "HttpApiPOSTauthregisterRegisterIntegrationPermission86BC8E45": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RegisterFnA997AE2F",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:123456789012:",
       {
        "Ref": "HttpApiF5A9A8A7"
       },
       "/*/*/auth/register"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/POST--auth--register/RegisterIntegration-Permission"
   }
  },
  "HttpApiPOSTauthregisterBB9BB35F": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "POST /auth/register",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "HttpApiPOSTauthregisterRegisterIntegrationC123DAC5"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/POST--auth--register/Resource"
   }
  },
  "HttpApiPOSTauthloginLoginIntegrationD65971B9": {
   "Type": "AWS::ApiGatewayV2::Integration",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "IntegrationType": "AWS_PROXY",
    "IntegrationUri": {
     "Fn::GetAtt": [
      "LoginFn9B45172B",
      "Arn"
     ]
    },
    "PayloadFormatVersion": "2.0"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/POST--auth--login/LoginIntegration/Resource"
   }
  },
  "HttpApiPOSTauthloginLoginIntegrationPermission8F5F7DF8": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "LoginFn9B45172B",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:123456789012:",
       {
        "Ref": "HttpApiF5A9A8A7"
       },
       "/*/*/auth/login"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/POST--auth--login/LoginIntegration-Permission"
   }
  },
  "HttpApiPOSTauthlogin634C8840": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "POST /auth/login",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "HttpApiPOSTauthloginLoginIntegrationD65971B9"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/POST--auth--login/Resource"
   }
  },
  "HttpApiPOSTauthrefreshRefreshIntegration6C4A89A0": {
   "Type": "AWS::ApiGatewayV2::Integration",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "IntegrationType": "AWS_PROXY",
    "IntegrationUri": {
     "Fn::GetAtt": [
      "RefreshFnFA748627",
      "Arn"
     ]
    },
    "PayloadFormatVersion": "2.0"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/POST--auth--refresh/RefreshIntegration/Resource"
   }
  },
  "HttpApiPOSTauthrefreshRefreshIntegrationPermissionDD074EC2": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "RefreshFnFA748627",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:123456789012:",
       {
        "Ref": "HttpApiF5A9A8A7"
       },
       "/*/*/auth/refresh"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/POST--auth--refresh/RefreshIntegration-Permission"
   }
  },
  "HttpApiPOSTauthrefreshA8D26950": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "POST /auth/refresh",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "HttpApiPOSTauthrefreshRefreshIntegration6C4A89A0"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/POST--auth--refresh/Resource"
   }
  },
  "HttpApiGETproductsProductsIntegrationCCC91A05": {
   "Type": "AWS::ApiGatewayV2::Integration",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "IntegrationType": "AWS_PROXY",
    "IntegrationUri": {
     "Fn::GetAtt": [
      "ProductsFn8FFABC69",
      "Arn"
     ]
    },
    "PayloadFormatVersion": "2.0"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/GET--products/ProductsIntegration/Resource"
   }
  },
  "HttpApiGETproductsProductsIntegrationPermission1FAE3A72": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ProductsFn8FFABC69",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:123456789012:",
       {
        "Ref": "HttpApiF5A9A8A7"
       },
       "/*/*/products"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/GET--products/ProductsIntegration-Permission"
   }
  },
  "HttpApiGETproductsDD9BD677": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "GET /products",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "HttpApiGETproductsProductsIntegrationCCC91A05"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/GET--products/Resource"
   }
  },
  "HttpApiPOSTordersCreateOrderIntegrationB2641A0E": {
   "Type": "AWS::ApiGatewayV2::Integration",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "IntegrationType": "AWS_PROXY",
    "IntegrationUri": {
     "Fn::GetAtt": [
      "CreateOrderFnDC0D005D",
      "Arn"
     ]
    },
    "PayloadFormatVersion": "2.0"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/POST--orders/CreateOrderIntegration/Resource"
   }
  },
  "HttpApiPOSTordersCreateOrderIntegrationPermissionF8D91C1E": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "CreateOrderFnDC0D005D",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:123456789012:",
       {
        "Ref": "HttpApiF5A9A8A7"
       },
       "/*/*/orders"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/POST--orders/CreateOrderIntegration-Permission"
   }
  },
  "HttpApiPOSTordersE6D287A8": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "AuthorizationType": "JWT",
    "AuthorizerId": {
     "Ref": "HttpApiUserPoolJwtAuthorizer9512187D"
    },
    "RouteKey": "POST /orders",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "HttpApiPOSTordersCreateOrderIntegrationB2641A0E"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/POST--orders/Resource"
   }
  },
  "HttpApiUserPoolJwtAuthorizer9512187D": {
   "Type": "AWS::ApiGatewayV2::Authorizer",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "AuthorizerType": "JWT",
    "IdentitySource": [
     "$request.header.Authorization"
    ],
    "JwtConfiguration": {
     "Audience": [
      {
       "Ref": "UserPoolClient2F5918F7"
      }
     ],
     "Issuer": {
      "Fn::GetAtt": [
       "UserPool6BA7E5F2",
       "ProviderURL"
      ]
     }
    },
    "Name": "UserPoolJwtAuthorizer"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/UserPoolJwtAuthorizer/Resource"
   }
  },
  "HttpApiGETordersListOrdersIntegrationFB6AF4D6": {
   "Type": "AWS::ApiGatewayV2::Integration",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "IntegrationType": "AWS_PROXY",
    "IntegrationUri": {
     "Fn::GetAtt": [
      "ListOrdersFn6F2838C6",
      "Arn"
     ]
    },
    "PayloadFormatVersion": "2.0"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/GET--orders/ListOrdersIntegration/Resource"
   }
  },
  "HttpApiGETordersListOrdersIntegrationPermission02FC766A": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "ListOrdersFn6F2838C6",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:123456789012:",
       {
        "Ref": "HttpApiF5A9A8A7"
       },
       "/*/*/orders"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/GET--orders/ListOrdersIntegration-Permission"
   }
  },
  "HttpApiGETorders4E114900": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "AuthorizationType": "JWT",
    "AuthorizerId": {
     "Ref": "HttpApiUserPoolJwtAuthorizer9512187D"
    },
    "RouteKey": "GET /orders",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "HttpApiGETordersListOrdersIntegrationFB6AF4D6"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/GET--orders/Resource"
   }
  },
  "HttpApiOPTIONSproxyOptionsIntegrationDE6BB321": {
   "Type": "AWS::ApiGatewayV2::Integration",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "IntegrationType": "AWS_PROXY",
    "IntegrationUri": {
     "Fn::GetAtt": [
      "OptionsFn22CF12D2",
      "Arn"
     ]
    },
    "PayloadFormatVersion": "2.0"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/OPTIONS--{proxy+}/OptionsIntegration/Resource"
   }
  },
  "HttpApiOPTIONSproxyOptionsIntegrationPermissionE754ECE1": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "OptionsFn22CF12D2",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:123456789012:",
       {
        "Ref": "HttpApiF5A9A8A7"
       },
       "/*/*/{proxy+}"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/OPTIONS--{proxy+}/OptionsIntegration-Permission"
   }
  },
  "HttpApiOPTIONSproxy49C71BEB": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "HttpApiF5A9A8A7"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "OPTIONS /{proxy+}",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "HttpApiOPTIONSproxyOptionsIntegrationDE6BB321"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/HttpApi/OPTIONS--{proxy+}/Resource"
   }
  },
  "RegisterFnServiceRole60DD91DA": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/RegisterFn/ServiceRole/Resource"
   }
  },
  "RegisterFnServiceRoleDefaultPolicy17CEC328": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "cognito-idp:SignUp",
        "cognito-idp:AdminConfirmSignUp"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "RegisterFnServiceRoleDefaultPolicy17CEC328",
    "Roles": [
     {
      "Ref": "RegisterFnServiceRole60DD91DA"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/RegisterFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "RegisterFnA997AE2F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-bootstrap-assets-123456789012-us-east-1",
     "S3Key": "99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820.zip"
    },
    "Environment": {
     "Variables": {
      "USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "USER_POOL_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      }
     }
    },
    "Handler": "main.registerHandler",
    "Role": {
     "Fn::GetAtt": [
      "RegisterFnServiceRole60DD91DA",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "Timeout": 10,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "RegisterFnServiceRoleDefaultPolicy17CEC328",
    "RegisterFnServiceRole60DD91DA"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/RegisterFn/Resource",
    "aws:asset:path": "asset.99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "LoginFnServiceRole693ED621": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/LoginFn/ServiceRole/Resource"
   }
  },
  "LoginFnServiceRoleDefaultPolicy129EE1D4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "cognito-idp:InitiateAuth",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "LoginFnServiceRoleDefaultPolicy129EE1D4",
    "Roles": [
     {
      "Ref": "LoginFnServiceRole693ED621"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/LoginFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "LoginFn9B45172B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-bootstrap-assets-123456789012-us-east-1",
     "S3Key": "99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820.zip"
    },
    "Environment": {
     "Variables": {
      "USER_POOL_ID": {
       "Ref": "UserPool6BA7E5F2"
      },
      "USER_POOL_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      }
     }
    },
    "Handler": "main.loginHandler",
    "Role": {
     "Fn::GetAtt": [
      "LoginFnServiceRole693ED621",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "Timeout": 10,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "LoginFnServiceRoleDefaultPolicy129EE1D4",
    "LoginFnServiceRole693ED621"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/LoginFn/Resource",
    "aws:asset:path": "asset.99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "RefreshFnServiceRole1AFCCCE5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/RefreshFn/ServiceRole/Resource"
   }
  },
  "RefreshFnServiceRoleDefaultPolicyEE68F60F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "cognito-idp:InitiateAuth",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "UserPool6BA7E5F2",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "RefreshFnServiceRoleDefaultPolicyEE68F60F",
    "Roles": [
     {
      "Ref": "RefreshFnServiceRole1AFCCCE5"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/RefreshFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "RefreshFnFA748627": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-bootstrap-assets-123456789012-us-east-1",
     "S3Key": "99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820.zip"
    },
    "Environment": {
     "Variables": {
      "USER_POOL_CLIENT_ID": {
       "Ref": "UserPoolClient2F5918F7"
      }
     }
    },
    "Handler": "main.refreshHandler",
    "Role": {
     "Fn::GetAtt": [
      "RefreshFnServiceRole1AFCCCE5",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "Timeout": 10,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "RefreshFnServiceRoleDefaultPolicyEE68F60F",
    "RefreshFnServiceRole1AFCCCE5"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/RefreshFn/Resource",
    "aws:asset:path": "asset.99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "ProductsFnServiceRoleA9750689": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ProductsFn/ServiceRole/Resource"
   }
  },
  "ProductsFnServiceRoleDefaultPolicy7F31E07D": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ProductsFnServiceRoleDefaultPolicy7F31E07D",
    "Roles": [
     {
      "Ref": "ProductsFnServiceRoleA9750689"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ProductsFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ProductsFn8FFABC69": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-bootstrap-assets-123456789012-us-east-1",
     "S3Key": "99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820.zip"
    },
    "Handler": "main.productsHandler",
    "Role": {
     "Fn::GetAtt": [
      "ProductsFnServiceRoleA9750689",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "Timeout": 10,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ProductsFnServiceRoleDefaultPolicy7F31E07D",
    "ProductsFnServiceRoleA9750689"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ProductsFn/Resource",
    "aws:asset:path": "asset.99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "CreateOrderFnServiceRole7E513123": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/CreateOrderFn/ServiceRole/Resource"
   }
  },
  "CreateOrderFnServiceRoleDefaultPolicyB5FFA7EE": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:GetItem",
        "dynamodb:Query",
        "dynamodb:DeleteItem"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "MainTable74195DAB",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "MainTable74195DAB",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DataKey17AFBB84",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateOrderFnServiceRoleDefaultPolicyB5FFA7EE",
    "Roles": [
     {
      "Ref": "CreateOrderFnServiceRole7E513123"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/CreateOrderFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CreateOrderFnDC0D005D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-bootstrap-assets-123456789012-us-east-1",
     "S3Key": "99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "MainTable74195DAB"
      }
     }
    },
    "Handler": "main.createOrderHandler",
    "Role": {
     "Fn::GetAtt": [
      "CreateOrderFnServiceRole7E513123",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "Timeout": 10,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "CreateOrderFnServiceRoleDefaultPolicyB5FFA7EE",
    "CreateOrderFnServiceRole7E513123"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/CreateOrderFn/Resource",
    "aws:asset:path": "asset.99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "ListOrdersFnServiceRoleC9CADE33": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ListOrdersFn/ServiceRole/Resource"
   }
  },
  "ListOrdersFnServiceRoleDefaultPolicyBE7B98F8": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "dynamodb:GetItem",
        "dynamodb:Query"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "MainTable74195DAB",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "MainTable74195DAB",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "kms:Decrypt",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DataKey17AFBB84",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ListOrdersFnServiceRoleDefaultPolicyBE7B98F8",
    "Roles": [
     {
      "Ref": "ListOrdersFnServiceRoleC9CADE33"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ListOrdersFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ListOrdersFn6F2838C6": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-bootstrap-assets-123456789012-us-east-1",
     "S3Key": "99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Ref": "MainTable74195DAB"
      }
     }
    },
    "Handler": "main.listOrdersHandler",
    "Role": {
     "Fn::GetAtt": [
      "ListOrdersFnServiceRoleC9CADE33",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "Timeout": 10,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "ListOrdersFnServiceRoleDefaultPolicyBE7B98F8",
    "ListOrdersFnServiceRoleC9CADE33"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ListOrdersFn/Resource",
    "aws:asset:path": "asset.99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "OrderStreamFnServiceRoleD210570F": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrderStreamFn/ServiceRole/Resource"
   }
  },
  "OrderStreamFnServiceRoleDefaultPolicy42FF25A9": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "dynamodb:ListStreams",
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:DescribeKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DataKey17AFBB84",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:DescribeStream",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "MainTable74195DAB",
         "StreamArn"
        ]
       }
      },
      {
       "Action": [
        "dynamodb:DescribeStream",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:ListStreams"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "MainTable74195DAB",
         "StreamArn"
        ]
       }
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DataKey17AFBB84",
         "Arn"
        ]
       }
      },
      {
       "Action": "sns:Publish",
       "Effect": "Allow",
       "Resource": {
        "Ref": "OrdersTopic47790A41"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "OrderStreamFnServiceRoleDefaultPolicy42FF25A9",
    "Roles": [
     {
      "Ref": "OrderStreamFnServiceRoleD210570F"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrderStreamFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "OrderStreamFn89192B53": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-bootstrap-assets-123456789012-us-east-1",
     "S3Key": "99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820.zip"
    },
    "Environment": {
     "Variables": {
      "ORDERS_TOPIC_ARN": {
       "Ref": "OrdersTopic47790A41"
      }
     }
    },
    "Handler": "main.orderStreamHandler",
    "Role": {
     "Fn::GetAtt": [
      "OrderStreamFnServiceRoleD210570F",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "Timeout": 10,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "OrderStreamFnServiceRoleDefaultPolicy42FF25A9",
    "OrderStreamFnServiceRoleD210570F"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrderStreamFn/Resource",
    "aws:asset:path": "asset.99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "OrderStreamFnDynamoDBEventSourceSdg19PrimaryStackMainTableE82CC0BBCC09E615": {
   "Type": "AWS::Lambda::EventSourceMapping",
   "Properties": {
    "BatchSize": 10,
    "EventSourceArn": {
     "Fn::GetAtt": [
      "MainTable74195DAB",
      "StreamArn"
     ]
    },
    "FunctionName": {
     "Ref": "OrderStreamFn89192B53"
    },
    "StartingPosition": "LATEST",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrderStreamFn/DynamoDBEventSource:Sdg19PrimaryStackMainTableE82CC0BB/Resource"
   }
  },
  "OptionsFnServiceRole67E51491": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OptionsFn/ServiceRole/Resource"
   }
  },
  "OptionsFnServiceRoleDefaultPolicy28EE69DC": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "OptionsFnServiceRoleDefaultPolicy28EE69DC",
    "Roles": [
     {
      "Ref": "OptionsFnServiceRole67E51491"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OptionsFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "OptionsFn22CF12D2": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-bootstrap-assets-123456789012-us-east-1",
     "S3Key": "99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820.zip"
    },
    "Handler": "main.optionsHandler",
    "Role": {
     "Fn::GetAtt": [
      "OptionsFnServiceRole67E51491",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "Timeout": 5,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "OptionsFnServiceRoleDefaultPolicy28EE69DC",
    "OptionsFnServiceRole67E51491"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OptionsFn/Resource",
    "aws:asset:path": "asset.99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "Certificate4E7ABB08": {
   "Type": "AWS::CertificateManager::Certificate",
   "Properties": {
    "DomainName": "web.example.com",
    "DomainValidationOptions": [
     {
      "DomainName": "web.example.com",
      "HostedZoneId": "Z000000000000"
     },
     {
      "DomainName": "api.example.com",
      "HostedZoneId": "Z000000000000"
     }
    ],
    "SubjectAlternativeNames": [
     "api.example.com"
    ],
    "Tags": [
     {
      "Key": "Name",
      "Value": "Sdg19PrimaryStack/Certificate"
     },
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "ValidationMethod": "DNS"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/Certificate/Resource"
   }
  },
  "WebBucket12880F5B": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "aws-cdk:auto-delete-objects",
      "Value": "true"
     },
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/WebBucket/Resource"
   }
  },
  "WebBucketPolicy95D08FAA": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "WebBucket12880F5B"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "WebBucket12880F5B",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "WebBucket12880F5B",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:PutBucketPolicy",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::GetAtt": [
          "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
          "Arn"
         ]
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "WebBucket12880F5B",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "WebBucket12880F5B",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "s3:GetObject",
       "Condition": {
        "StringEquals": {
         "AWS:SourceArn": {
          "Fn::Join": [
           "",
           [
            "arn:",
            {
             "Ref": "AWS::Partition"
            },
            ":cloudfront::",
            {
             "Ref": "AWS::AccountId"
            },
            ":distribution/",
            {
             "Ref": "WebDistribution59C46482"
            }
           ]
          ]
         }
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": "cloudfront.amazonaws.com"
       },
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::GetAtt": [
            "WebBucket12880F5B",
            "Arn"
           ]
          },
          "/*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/WebBucket/Policy/Resource"
   }
  },
  "WebBucketAutoDeleteObjectsCustomResource9C1A079F": {
   "Type": "Custom::S3AutoDeleteObjects",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F",
      "Arn"
     ]
    },
    "BucketName": {
     "Ref": "WebBucket12880F5B"
    }
   },
   "DependsOn": [
    "WebBucketPolicy95D08FAA"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/WebBucket/AutoDeleteObjectsCustomResource/Default"
   }
  },
  "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Version": "2012-10-17",
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ]
    },
    "ManagedPolicyArns": [
     {
      "Fn::Sub": "arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role"
   }
  },
  "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-bootstrap-assets-123456789012-us-east-1",
     "S3Key": "faa95a81ae7d7373f3e1f242268f904eb748d8d0fdd306e8a6fe515a1905a7d6.zip"
    },
    "Timeout": 900,
    "MemorySize": 128,
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
      "Arn"
     ]
    },
    "Runtime": "nodejs22.x",
    "Description": {
     "Fn::Join": [
      "",
      [
       "Lambda function for auto-deleting objects in ",
       {
        "Ref": "WebBucket12880F5B"
       },
       " S3 bucket."
      ]
     ]
    }
   },
   "DependsOn": [
    "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler",
    "aws:asset:path": "asset.faa95a81ae7d7373f3e1f242268f904eb748d8d0fdd306e8a6fe515a1905a7d6",
    "aws:asset:property": "Code"
   }
  },
  "WebAcl": {
   "Type": "AWS::WAFv2::WebACL",
   "Properties": {
    "DefaultAction": {
     "Allow": {}
    },
    "Rules": [
     {
      "Name": "AWSManagedRulesCommonRuleSet",
      "OverrideAction": {
       "None": {}
      },
      "Priority": 0,
      "Statement": {
       "ManagedRuleGroupStatement": {
        "Name": "AWSManagedRulesCommonRuleSet",
        "VendorName": "AWS"
       }
      },
      "VisibilityConfig": {
       "CloudWatchMetricsEnabled": true,
       "MetricName": "aws-common-rules",
       "SampledRequestsEnabled": true
      }
     }
    ],
    "Scope": "CLOUDFRONT",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "VisibilityConfig": {
     "CloudWatchMetricsEnabled": true,
     "MetricName": "web-acl",
     "SampledRequestsEnabled": true
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/WebAcl"
   }
  },
  "WebCachePolicyA235B87B": {
   "Type": "AWS::CloudFront::CachePolicy",
   "Properties": {
    "CachePolicyConfig": {
     "DefaultTTL": 604800,
     "MaxTTL": 31536000,
     "MinTTL": 3600,
     "Name": "Sdg19PrimaryStackWebCachePolicy5A739DB1-us-east-1",
     "ParametersInCacheKeyAndForwardedToOrigin": {
      "CookiesConfig": {
       "CookieBehavior": "none"
      },
      "EnableAcceptEncodingBrotli": true,
      "EnableAcceptEncodingGzip": true,
      "HeadersConfig": {
       "HeaderBehavior": "none"
      },
      "QueryStringsConfig": {
       "QueryStringBehavior": "none"
      }
     }
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/WebCachePolicy/Resource"
   }
  },
  "ProductsCachePolicy6F1FF7B9": {
   "Type": "AWS::CloudFront::CachePolicy",
   "Properties": {
    "CachePolicyConfig": {
     "DefaultTTL": 86400,
     "MaxTTL": 86400,
     "MinTTL": 0,
     "Name": "Sdg19PrimaryStackProductsCachePolicy9AF46095-us-east-1",
     "ParametersInCacheKeyAndForwardedToOrigin": {
      "CookiesConfig": {
       "CookieBehavior": "none"
      },
      "EnableAcceptEncodingBrotli": true,
      "EnableAcceptEncodingGzip": true,
      "HeadersConfig": {
       "HeaderBehavior": "none"
      },
      "QueryStringsConfig": {
       "QueryStringBehavior": "all"
      }
     }
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ProductsCachePolicy/Resource"
   }
  },
  "ApiCorsResponsePolicy0338CEA0": {
   "Type": "AWS::CloudFront::ResponseHeadersPolicy",
   "Properties": {
    "ResponseHeadersPolicyConfig": {
     "CorsConfig": {
      "AccessControlAllowCredentials": false,
      "AccessControlAllowHeaders": {
       "Items": [
        "authorization",
        "content-type",
        "x-amz-date",
        "x-api-key",
        "x-amz-security-token",
        "x-amz-user-agent"
       ]
      },
      "AccessControlAllowMethods": {
       "Items": [
        "GET",
        "POST",
        "OPTIONS"
       ]
      },
      "AccessControlAllowOrigins": {
       "Items": [
        "https://web.example.com"
       ]
      },
      "AccessControlMaxAgeSec": 3600,
      "OriginOverride": true
     },
     "Name": "Sdg19PrimaryStackApiCorsResponsePolicyD93B5C38"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ApiCorsResponsePolicy/Resource"
   }
  },
  "WebDistributionOrigin1S3OriginAccessControl83AD2F73": {
   "Type": "AWS::CloudFront::OriginAccessControl",
   "Properties": {
    "OriginAccessControlConfig": {
     "Name": "Sdg19PrimaryStackWebDistribuOrigin1S3OriginAccessControl5F3B876A",
     "OriginAccessControlOriginType": "s3",
     "SigningBehavior": "always",
     "SigningProtocol": "sigv4"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/WebDistribution/Origin1/S3OriginAccessControl/Resource"
   }
  },
  "WebDistribution59C46482": {
   "Type": "AWS::CloudFront::Distribution",
   "Properties": {
    "DistributionConfig": {
     "Aliases": [
      "web.example.com"
     ],
     "CustomErrorResponses": [
      {
       "ErrorCode": 403,
       "ResponseCode": 200,
       "ResponsePagePath": "/index.html"
      },
      {
       "ErrorCode": 404,
       "ResponseCode": 200,
       "ResponsePagePath": "/index.html"
      }
     ],
     "DefaultCacheBehavior": {
      "CachePolicyId": {
       "Ref": "WebCachePolicyA235B87B"
      },
      "Compress": true,
      "TargetOriginId": "Sdg19PrimaryStackWebDistributionOrigin1F6D455C8",
      "ViewerProtocolPolicy": "redirect-to-https"
     },
     "DefaultRootObject": "index.html",
     "Enabled": true,
     "HttpVersion": "http2",
     "IPV6Enabled": true,
     "Origins": [
      {
       "DomainName": {
        "Fn::GetAtt": [
         "WebBucket12880F5B",
         "RegionalDomainName"
        ]
       },
       "Id": "Sdg19PrimaryStackWebDistributionOrigin1F6D455C8",
       "OriginAccessControlId": {
        "Fn::GetAtt": [
         "WebDistributionOrigin1S3OriginAccessControl83AD2F73",
         "Id"
        ]
       },
       "S3OriginConfig": {
        "OriginAccessIdentity": ""
       }
      }
     ],
     "PriceClass": "PriceClass_100",
     "ViewerCertificate": {
      "AcmCertificateArn": {
       "Ref": "Certificate4E7ABB08"
      },
      "MinimumProtocolVersion": "TLSv1.2_2021",
      "SslSupportMethod": "sni-only"
     },
     "WebACLId": {
      "Fn::GetAtt": [
       "WebAcl",
       "Arn"
      ]
     }
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/WebDistribution/Resource"
   }
  },
  "ApiDistribution1DFA7F7C": {
   "Type": "AWS::CloudFront::Distribution",
   "Properties": {
    "DistributionConfig": {
     "Aliases": [
      "api.example.com"
     ],
     "CacheBehaviors": [
      {
       "AllowedMethods": [
        "GET",
        "HEAD",
        "OPTIONS"
       ],
       "CachePolicyId": {
        "Ref": "ProductsCachePolicy6F1FF7B9"
       },
       "Compress": true,
       "OriginRequestPolicyId": "b689b0a8-53d0-40ab-baf2-68738e2966ac",
       "PathPattern": "/products",
       "ResponseHeadersPolicyId": {
        "Ref": "ApiCorsResponsePolicy0338CEA0"
       },
       "TargetOriginId": "Sdg19PrimaryStackApiDistributionOrigin28652E574",
       "ViewerProtocolPolicy": "redirect-to-https"
      }
     ],
     "DefaultCacheBehavior": {
      "AllowedMethods": [
       "GET",
       "HEAD",
       "OPTIONS",
       "PUT",
       "PATCH",
       "POST",
       "DELETE"
      ],
      "CachePolicyId": "4135ea2d-6df8-44a3-9df3-4b5a84be39ad",
      "Compress": true,
      "OriginRequestPolicyId": "b689b0a8-53d0-40ab-baf2-68738e2966ac",
      "ResponseHeadersPolicyId": {
       "Ref": "ApiCorsResponsePolicy0338CEA0"
      },
      "TargetOriginId": "Sdg19PrimaryStackApiDistributionOrigin1FAD0AA1C",
      "ViewerProtocolPolicy": "redirect-to-https"
     },
     "Enabled": true,
     "HttpVersion": "http2",
     "IPV6Enabled": true,
     "Origins": [
      {
       "CustomOriginConfig": {
        "OriginProtocolPolicy": "https-only",
        "OriginSSLProtocols": [
         "TLSv1.2"
        ]
       },
       "DomainName": {
        "Fn::Select": [
         2,
         {
          "Fn::Split": [
           "/",
           {
            "Fn::GetAtt": [
             "HttpApiF5A9A8A7",
             "ApiEndpoint"
            ]
           }
          ]
         }
        ]
       },
       "Id": "Sdg19PrimaryStackApiDistributionOrigin1FAD0AA1C"
      },
      {
       "CustomOriginConfig": {
        "OriginProtocolPolicy": "https-only",
        "OriginSSLProtocols": [
         "TLSv1.2"
        ]
       },
       "DomainName": {
        "Fn::Select": [
         2,
         {
          "Fn::Split": [
           "/",
           {
            "Fn::GetAtt": [
             "HttpApiF5A9A8A7",
             "ApiEndpoint"
            ]
           }
          ]
         }
        ]
       },
       "Id": "Sdg19PrimaryStackApiDistributionOrigin28652E574"
      }
     ],
     "PriceClass": "PriceClass_100",
     "ViewerCertificate": {
      "AcmCertificateArn": {
       "Ref": "Certificate4E7ABB08"
      },
      "MinimumProtocolVersion": "TLSv1.2_2021",
      "SslSupportMethod": "sni-only"
     },
     "WebACLId": {
      "Fn::GetAtt": [
       "WebAcl",
       "Arn"
      ]
     }
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ApiDistribution/Resource"
   }
  },
  "WebAliasRecordB1E87459": {
   "Type": "AWS::Route53::RecordSet",
   "Properties": {
    "AliasTarget": {
     "DNSName": {
      "Fn::GetAtt": [
       "WebDistribution59C46482",
       "DomainName"
      ]
     },
     "HostedZoneId": {
      "Fn::FindInMap": [
       "AWSCloudFrontPartitionHostedZoneIdMap",
       {
        "Ref": "AWS::Partition"
       },
       "zoneId"
      ]
     }
    },
    "HostedZoneId": "Z000000000000",
    "Name": "web.example.com.",
    "Type": "A"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/WebAliasRecord/Resource"
   }
  },
  "ApiAliasRecordBCE933A3": {
   "Type": "AWS::Route53::RecordSet",
   "Properties": {
    "AliasTarget": {
     "DNSName": {
      "Fn::GetAtt": [
       "ApiDistribution1DFA7F7C",
       "DomainName"
      ]
     },
     "HostedZoneId": {
      "Fn::FindInMap": [
       "AWSCloudFrontPartitionHostedZoneIdMap",
       {
        "Ref": "AWS::Partition"
       },
       "zoneId"
      ]
     }
    },
    "HostedZoneId": "Z000000000000",
    "Name": "api.example.com.",
    "Type": "A"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ApiAliasRecord/Resource"
   }
  },
  "ReplicationRoleCE149CEC": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "s3.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "RoleName": "Sdg19PrimaryStack-replication-role",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ReplicationRole/Resource"
   }
  },
  "ReplicationRoleDefaultPolicy80AD15BB": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "s3:GetReplicationConfiguration",
        "s3:ListBucket",
        "s3:GetObjectVersionForReplication",
        "s3:GetObjectVersionAcl",
        "s3:GetObjectVersionTagging",
        "s3:GetObjectRetention",
        "s3:GetObjectLegalHold"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "s3:ReplicateObject",
        "s3:ReplicateDelete",
        "s3:ReplicateTags",
        "s3:ObjectOwnerOverrideToBucketOwner"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": "kms:Decrypt",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DataKey17AFBB84",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:Encrypt",
        "kms:ReEncrypt*",
        "kms:GenerateDataKey*"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "ExportsReader8B249524",
         "/cdk/exports/Sdg19PrimaryStack/Sdg19ReplicaStackuseast2FnGetAttEmailsReplicaKeyF79649DFArn5948744C"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ReplicationRoleDefaultPolicy80AD15BB",
    "Roles": [
     {
      "Ref": "ReplicationRoleCE149CEC"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ReplicationRole/DefaultPolicy/Resource"
   }
  },
  "DataBucketE3889A50": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "aws-cdk:auto-delete-objects",
      "Value": "true"
     },
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/DataBucket/Resource"
   }
  },
  "DataBucketPolicy3231C704": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "DataBucketE3889A50"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "DataBucketE3889A50",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "DataBucketE3889A50",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:PutBucketPolicy",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::GetAtt": [
          "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
          "Arn"
         ]
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "DataBucketE3889A50",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "DataBucketE3889A50",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/DataBucket/Policy/Resource"
   }
  },
  "DataBucketAutoDeleteObjectsCustomResource9FB51BF3": {
   "Type": "Custom::S3AutoDeleteObjects",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F",
      "Arn"
     ]
    },
    "BucketName": {
     "Ref": "DataBucketE3889A50"
    }
   },
   "DependsOn": [
    "DataBucketPolicy3231C704"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/DataBucket/AutoDeleteObjectsCustomResource/Default"
   }
  },
  "OrdersStream464CF62B": {
   "Type": "AWS::Kinesis::Stream",
   "Properties": {
    "RetentionPeriodHours": 24,
    "StreamEncryption": {
     "EncryptionType": "KMS",
     "KeyId": {
      "Fn::GetAtt": [
       "DataKey17AFBB84",
       "Arn"
      ]
     }
    },
    "StreamModeDetails": {
     "StreamMode": "ON_DEMAND"
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrdersStream/Resource"
   }
  },
  "DataLakeDatabase": {
   "Type": "AWS::Glue::Database",
   "Properties": {
    "CatalogId": "123456789012",
    "DatabaseInput": {
     "Name": "sdg19_data_lake"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/DataLakeDatabase"
   }
  },
  "DataLakeOrdersTable": {
   "Type": "AWS::Glue::Table",
   "Properties": {
    "CatalogId": "123456789012",
    "DatabaseName": {
     "Ref": "DataLakeDatabase"
    },
    "TableInput": {
     "Name": "orders",
     "Parameters": {
      "classification": "parquet"
     },
     "PartitionKeys": [
      {
       "Name": "year",
       "Type": "string"
      },
      {
       "Name": "month",
       "Type": "string"
      },
      {
       "Name": "day",
       "Type": "string"
      },
      {
       "Name": "hour",
       "Type": "string"
      }
     ],
     "StorageDescriptor": {
      "Columns": [
       {
        "Name": "orderId",
        "Type": "string"
       },
       {
        "Name": "userPk",
        "Type": "string"
       },
       {
        "Name": "createdAt",
        "Type": "string"
       },
       {
        "Name": "status",
        "Type": "string"
       },
       {
        "Name": "total",
        "Type": "double"
       },
       {
        "Name": "items",
        "Type": "string"
       }
      ],
      "InputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetInputFormat",
      "Location": {
       "Fn::Join": [
        "",
        [
         "s3://",
         {
          "Ref": "DataBucketE3889A50"
         },
         "/data-lake/orders/"
        ]
       ]
      },
      "OutputFormat": "org.apache.hadoop.hive.ql.io.parquet.MapredParquetOutputFormat",
      "SerdeInfo": {
       "SerializationLibrary": "org.apache.hadoop.hive.ql.io.parquet.serde.ParquetHiveSerDe"
      }
     },
     "TableType": "EXTERNAL_TABLE"
    }
   },
   "DependsOn": [
    "DataLakeDatabase"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/DataLakeOrdersTable"
   }
  },
  "OrdersFirehoseRoleEE9F194E": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "firehose.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "RoleName": "OrdersFirehoseRole",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrdersFirehoseRole/Resource"
   }
  },
  "OrdersFirehoseRoleDefaultPolicy22D47B42": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "kinesis:DescribeStream",
        "kinesis:DescribeStreamSummary"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "kinesis:GetShardIterator",
        "kinesis:GetRecords",
        "kinesis:ListShards"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "OrdersStream464CF62B",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "s3:AbortMultipartUpload",
        "s3:GetBucketLocation",
        "s3:GetObject",
        "s3:ListBucket",
        "s3:ListBucketMultipartUploads",
        "s3:PutObject"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "DataBucketE3889A50",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "DataBucketE3889A50",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:GenerateDataKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DataKey17AFBB84",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "glue:GetTable",
        "glue:GetTableVersion",
        "glue:GetTableVersions"
       ],
       "Effect": "Allow",
       "Resource": [
        "arn:aws:glue:us-east-1:123456789012:catalog",
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:glue:us-east-1:123456789012:database/",
           {
            "Ref": "DataLakeDatabase"
           }
          ]
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           "arn:aws:glue:us-east-1:123456789012:table/",
           {
            "Ref": "DataLakeDatabase"
           },
           "/",
           {
            "Ref": "DataLakeOrdersTable"
           }
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "logs:CreateLogGroup",
        "logs:CreateLogStream",
        "logs:PutLogEvents"
       ],
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "OrdersFirehoseRoleDefaultPolicy22D47B42",
    "Roles": [
     {
      "Ref": "OrdersFirehoseRoleEE9F194E"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrdersFirehoseRole/DefaultPolicy/Resource"
   }
  },
  "OrdersFirehoseLogs3E6CDFB5": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "RetentionInDays": 30,
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrdersFirehoseLogs/Resource"
   }
  },
  "OrdersFirehose": {
   "Type": "AWS::KinesisFirehose::DeliveryStream",
   "Properties": {
    "DeliveryStreamName": "OrdersFireHose",
    "DeliveryStreamType": "KinesisStreamAsSource",
    "ExtendedS3DestinationConfiguration": {
     "BucketARN": {
      "Fn::GetAtt": [
       "DataBucketE3889A50",
       "Arn"
      ]
     },
     "BufferingHints": {
      "IntervalInSeconds": 300,
      "SizeInMBs": 64
     },
     "CloudWatchLoggingOptions": {
      "Enabled": true,
      "LogGroupName": {
       "Ref": "OrdersFirehoseLogs3E6CDFB5"
      },
      "LogStreamName": "S3Delivery"
     },
     "CompressionFormat": "UNCOMPRESSED",
     "DataFormatConversionConfiguration": {
      "Enabled": true,
      "InputFormatConfiguration": {
       "Deserializer": {
        "OpenXJsonSerDe": {}
       }
      },
      "OutputFormatConfiguration": {
       "Serializer": {
        "ParquetSerDe": {}
       }
      },
      "SchemaConfiguration": {
       "CatalogId": "123456789012",
       "DatabaseName": {
        "Ref": "DataLakeDatabase"
       },
       "Region": "us-east-1",
       "RoleARN": {
        "Fn::GetAtt": [
         "OrdersFirehoseRoleEE9F194E",
         "Arn"
        ]
       },
       "TableName": {
        "Ref": "DataLakeOrdersTable"
       }
      }
     },
     "DynamicPartitioningConfiguration": {
      "Enabled": true,
      "RetryOptions": {
       "DurationInSeconds": 300
      }
     },
     "ErrorOutputPrefix": "data-lake/errors/",
     "Prefix": "data-lake/orders/!{partitionKeyFromQuery:year}/!{partitionKeyFromQuery:month}/!{partitionKeyFromQuery:day}/!{partitionKeyFromQuery:hour}/",
     "ProcessingConfiguration": {
      "Enabled": true,
      "Processors": [
       {
        "Parameters": [
         {
          "ParameterName": "MetadataExtractionQuery",
          "ParameterValue": "{year: .createdAt[0:4], month: .createdAt[5:7], day: .createdAt[8:10], hour: .createdAt[11:13]}"
         },
         {
          "ParameterName": "JsonParsingEngine",
          "ParameterValue": "JQ-1.6"
         }
        ],
        "Type": "MetadataExtraction"
       }
      ]
     },
     "RoleARN": {
      "Fn::GetAtt": [
       "OrdersFirehoseRoleEE9F194E",
       "Arn"
      ]
     }
    },
    "KinesisStreamSourceConfiguration": {
     "KinesisStreamARN": {
      "Fn::GetAtt": [
       "OrdersStream464CF62B",
       "Arn"
      ]
     },
     "RoleARN": {
      "Fn::GetAtt": [
       "OrdersFirehoseRoleEE9F194E",
       "Arn"
      ]
     }
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "DependsOn": [
    "DataLakeOrdersTable",
    "OrdersFirehoseRoleDefaultPolicy22D47B42",
    "OrdersFirehoseRoleEE9F194E"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrdersFirehose"
   }
  },
  "LogsBucket9C4D8843": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "SSEAlgorithm": "AES256"
       }
      }
     ]
    },
    "LifecycleConfiguration": {
     "Rules": [
      {
       "ExpirationInDays": 30,
       "Status": "Enabled"
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "Tags": [
     {
      "Key": "aws-cdk:auto-delete-objects",
      "Value": "true"
     },
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/LogsBucket/Resource"
   }
  },
  "LogsBucketPolicyD70D9252": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "LogsBucket9C4D8843"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "LogsBucket9C4D8843",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "LogsBucket9C4D8843",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:PutBucketPolicy",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::GetAtt": [
          "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
          "Arn"
         ]
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "LogsBucket9C4D8843",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "LogsBucket9C4D8843",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "s3:GetBucketAcl",
       "Effect": "Allow",
       "Principal": {
        "Service": "cloudtrail.amazonaws.com"
       },
       "Resource": {
        "Fn::GetAtt": [
         "LogsBucket9C4D8843",
         "Arn"
        ]
       }
      },
      {
       "Action": "s3:PutObject",
       "Condition": {
        "StringEquals": {
         "s3:x-amz-acl": "bucket-owner-full-control"
        }
       },
       "Effect": "Allow",
       "Principal": {
        "Service": "cloudtrail.amazonaws.com"
       },
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::GetAtt": [
            "LogsBucket9C4D8843",
            "Arn"
           ]
          },
          "/AWSLogs/123456789012/*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/LogsBucket/Policy/Resource"
   }
  },
  "LogsBucketAutoDeleteObjectsCustomResource7D54FB85": {
   "Type": "Custom::S3AutoDeleteObjects",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F",
      "Arn"
     ]
    },
    "BucketName": {
     "Ref": "LogsBucket9C4D8843"
    }
   },
   "DependsOn": [
    "LogsBucketPolicyD70D9252"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/LogsBucket/AutoDeleteObjectsCustomResource/Default"
   }
  },
  "EmailsBucket616D9B95": {
   "Type": "AWS::S3::Bucket",
   "Properties": {
    "BucketEncryption": {
     "ServerSideEncryptionConfiguration": [
      {
       "ServerSideEncryptionByDefault": {
        "KMSMasterKeyID": {
         "Fn::GetAtt": [
          "DataKey17AFBB84",
          "Arn"
         ]
        },
        "SSEAlgorithm": "aws:kms"
       }
      }
     ]
    },
    "LifecycleConfiguration": {
     "Rules": [
      {
       "ExpirationInDays": 3650,
       "Status": "Enabled",
       "Transitions": [
        {
         "StorageClass": "GLACIER",
         "TransitionInDays": 365
        }
       ]
      }
     ]
    },
    "PublicAccessBlockConfiguration": {
     "BlockPublicAcls": true,
     "BlockPublicPolicy": true,
     "IgnorePublicAcls": true,
     "RestrictPublicBuckets": true
    },
    "ReplicationConfiguration": {
     "Role": {
      "Fn::GetAtt": [
       "ReplicationRoleCE149CEC",
       "Arn"
      ]
     },
     "Rules": [
      {
       "DeleteMarkerReplication": {
        "Status": "Enabled"
       },
       "Destination": {
        "Bucket": {
         "Fn::GetAtt": [
          "ExportsReader8B249524",
          "/cdk/exports/Sdg19PrimaryStack/Sdg19ReplicaStackuseast2FnGetAttEmailsReplicaBucket67B3049CArnA42F7D5C"
         ]
        },
        "EncryptionConfiguration": {
         "ReplicaKmsKeyID": {
          "Fn::GetAtt": [
           "ExportsReader8B249524",
           "/cdk/exports/Sdg19PrimaryStack/Sdg19ReplicaStackuseast2FnGetAttEmailsReplicaKeyF79649DFArn5948744C"
          ]
         }
        },
        "Metrics": {
         "EventThreshold": {
          "Minutes": 15
         },
         "Status": "Enabled"
        },
        "ReplicationTime": {
         "Status": "Enabled",
         "Time": {
          "Minutes": 15
         }
        },
        "StorageClass": "INTELLIGENT_TIERING"
       },
       "Filter": {
        "Prefix": ""
       },
       "Id": "EmailsReplication",
       "Priority": 1,
       "SourceSelectionCriteria": {
        "SseKmsEncryptedObjects": {
         "Status": "Enabled"
        }
       },
       "Status": "Enabled"
      }
     ]
    },
    "Tags": [
     {
      "Key": "aws-cdk:auto-delete-objects",
      "Value": "true"
     },
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "VersioningConfiguration": {
     "Status": "Enabled"
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/EmailsBucket/Resource"
   }
  },
  "EmailsBucketPolicyB6FCC6C8": {
   "Type": "AWS::S3::BucketPolicy",
   "Properties": {
    "Bucket": {
     "Ref": "EmailsBucket616D9B95"
    },
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "s3:*",
       "Condition": {
        "Bool": {
         "aws:SecureTransport": "false"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "EmailsBucket616D9B95",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "EmailsBucket616D9B95",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:PutBucketPolicy",
        "s3:GetBucket*",
        "s3:List*",
        "s3:DeleteObject*"
       ],
       "Effect": "Allow",
       "Principal": {
        "AWS": {
         "Fn::GetAtt": [
          "CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092",
          "Arn"
         ]
        }
       },
       "Resource": [
        {
         "Fn::GetAtt": [
          "EmailsBucket616D9B95",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "EmailsBucket616D9B95",
             "Arn"
            ]
           },
           "/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "s3:PutObject",
       "Condition": {
        "StringNotEquals": {
         "s3:x-amz-server-side-encryption": "aws:kms"
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::GetAtt": [
            "EmailsBucket616D9B95",
            "Arn"
           ]
          },
          "/*"
         ]
        ]
       },
       "Sid": "DenyUnencryptedEmailUploads"
      },
      {
       "Action": "s3:PutObject",
       "Condition": {
        "StringNotEquals": {
         "s3:x-amz-server-side-encryption-aws-kms-key-id": {
          "Fn::GetAtt": [
           "DataKey17AFBB84",
           "Arn"
          ]
         }
        }
       },
       "Effect": "Deny",
       "Principal": {
        "AWS": "*"
       },
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::GetAtt": [
            "EmailsBucket616D9B95",
            "Arn"
           ]
          },
          "/*"
         ]
        ]
       },
       "Sid": "DenyWrongKmsKeyForEmailUploads"
      }
     ],
     "Version": "2012-10-17"
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/EmailsBucket/Policy/Resource"
   }
  },
  "EmailsBucketAutoDeleteObjectsCustomResourceB6A3471E": {
   "Type": "Custom::S3AutoDeleteObjects",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomS3AutoDeleteObjectsCustomResourceProviderHandler9D90184F",
      "Arn"
     ]
    },
    "BucketName": {
     "Ref": "EmailsBucket616D9B95"
    }
   },
   "DependsOn": [
    "EmailsBucketPolicyB6FCC6C8"
   ],
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/EmailsBucket/AutoDeleteObjectsCustomResource/Default"
   }
  },
  "EmailsBucketSizeAlarm1C3A78F1": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "ComparisonOperator": "GreaterThanThreshold",
    "Dimensions": [
     {
      "Name": "BucketName",
      "Value": {
       "Ref": "EmailsBucket616D9B95"
      }
     },
     {
      "Name": "StorageType",
      "Value": "StandardStorage"
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "BucketSizeBytes",
    "Namespace": "AWS/S3",
    "Period": 86400,
    "Statistic": "Average",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "Threshold": 5368709120,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/EmailsBucketSizeAlarm/Resource"
   }
  },
  "EmailsReplicationBytesPendingAlarm11402B52": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "BucketName",
      "Value": {
       "Ref": "EmailsBucket616D9B95"
      }
     },
     {
      "Name": "RuleId",
      "Value": "EmailsReplication"
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "BytesPendingReplication",
    "Namespace": "AWS/S3",
    "Period": 300,
    "Statistic": "Sum",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "Threshold": 1,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/EmailsReplicationBytesPendingAlarm/Resource"
   }
  },
  "EmailsReplicationOpsPendingAlarmB472F306": {
   "Type": "AWS::CloudWatch::Alarm",
   "Properties": {
    "ComparisonOperator": "GreaterThanOrEqualToThreshold",
    "Dimensions": [
     {
      "Name": "BucketName",
      "Value": {
       "Ref": "EmailsBucket616D9B95"
      }
     },
     {
      "Name": "RuleId",
      "Value": "EmailsReplication"
     }
    ],
    "EvaluationPeriods": 1,
    "MetricName": "OperationsPendingReplication",
    "Namespace": "AWS/S3",
    "Period": 300,
    "Statistic": "Sum",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "Threshold": 1,
    "TreatMissingData": "notBreaching"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/EmailsReplicationOpsPendingAlarm/Resource"
   }
  },
  "SesDomainIdentityDkimDnsToken198D008AB": {
   "Type": "AWS::Route53::RecordSet",
   "Properties": {
    "HostedZoneId": "Z000000000000",
    "Name": {
     "Fn::GetAtt": [
      "SesDomainIdentity9A66B56D",
      "DkimDNSTokenName1"
     ]
    },
    "ResourceRecords": [
     {
      "Fn::GetAtt": [
       "SesDomainIdentity9A66B56D",
       "DkimDNSTokenValue1"
      ]
     }
    ],
    "TTL": "1800",
    "Type": "CNAME"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/SesDomainIdentity/DkimDnsToken1"
   }
  },
  "SesDomainIdentityDkimDnsToken26E1A6FB3": {
   "Type": "AWS::Route53::RecordSet",
   "Properties": {
    "HostedZoneId": "Z000000000000",
    "Name": {
     "Fn::GetAtt": [
      "SesDomainIdentity9A66B56D",
      "DkimDNSTokenName2"
     ]
    },
    "ResourceRecords": [
     {
      "Fn::GetAtt": [
       "SesDomainIdentity9A66B56D",
       "DkimDNSTokenValue2"
      ]
     }
    ],
    "TTL": "1800",
    "Type": "CNAME"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/SesDomainIdentity/DkimDnsToken2"
   }
  },
  "SesDomainIdentityDkimDnsToken3BD252D07": {
   "Type": "AWS::Route53::RecordSet",
   "Properties": {
    "HostedZoneId": "Z000000000000",
    "Name": {
     "Fn::GetAtt": [
      "SesDomainIdentity9A66B56D",
      "DkimDNSTokenName3"
     ]
    },
    "ResourceRecords": [
     {
      "Fn::GetAtt": [
       "SesDomainIdentity9A66B56D",
       "DkimDNSTokenValue3"
      ]
     }
    ],
    "TTL": "1800",
    "Type": "CNAME"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/SesDomainIdentity/DkimDnsToken3"
   }
  },
  "SesDomainIdentity9A66B56D": {
   "Type": "AWS::SES::EmailIdentity",
   "Properties": {
    "EmailIdentity": "example.com",
    "MailFromAttributes": {
     "MailFromDomain": "mail.example.com"
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/SesDomainIdentity/Resource"
   }
  },
  "SesDomainIdentityMailFromMxRecordE03CFE9A": {
   "Type": "AWS::Route53::RecordSet",
   "Properties": {
    "HostedZoneId": "Z000000000000",
    "Name": "mail.example.com.",
    "ResourceRecords": [
     "10 feedback-smtp.us-east-1.amazonses.com"
    ],
    "TTL": "1800",
    "Type": "MX"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/SesDomainIdentity/MailFromMxRecord/Resource"
   }
  },
  "SesDomainIdentityMailFromTxtRecord101F3240": {
   "Type": "AWS::Route53::RecordSet",
   "Properties": {
    "HostedZoneId": "Z000000000000",
    "Name": "mail.example.com.",
    "ResourceRecords": [
     "\"v=spf1 include:amazonses.com ~all\""
    ],
    "TTL": "1800",
    "Type": "TXT"
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/SesDomainIdentity/MailFromTxtRecord/Resource"
   }
  },
  "OrderEmailTemplate": {
   "Type": "AWS::SES::Template",
   "Properties": {
    "Template": {
     "HtmlPart": "\n          <!doctype html>\n          <html lang=\"es\">\n            <head>\n              <meta charset=\"utf-8\" />\n              <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n              <title>Orden {{orderId}}</title>\n            </head>\n\n            <body style=\"margin:0;padding:0;background:#f6f7f9;\">\n              <!-- Preheader -->\n              <div style=\"display:none;max-height:0;overflow:hidden;opacity:0;color:transparent;\">\n                Confirmacin de orden {{orderId}} ({{status}}). Total $ {{total}}.\n              </div>\n\n              <table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"background:#f6f7f9;\">\n                <tr>\n                  <td align=\"center\" style=\"padding:24px 12px;\">\n                    <table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\"\n                      style=\"max-width:640px;background:#ffffff;border-radius:16px;overflow:hidden;box-shadow:0 8px 24px rgba(16,24,40,.08);\">\n\n                      <!-- Header -->\n                      <tr>\n                        <td style=\"padding:28px 28px 16px 28px;\">\n                          <div style=\"font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:14px;color:#667085;\">\n                            Gracias por tu orden\n                          </div>\n                          <div style=\"margin-top:10px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:22px;font-weight:800;color:#101828;line-height:1.25;\">\n                            Confirmacin de compra\n                          </div>\n                          <div style=\"margin-top:10px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:14px;color:#475467;line-height:1.6;\">\n                            Recibimos tu orden y la estamos procesando. Aqu estn los detalles:\n                          </div>\n                        </td>\n                      </tr>\n\n                      <!-- Divider -->\n                      <tr>\n                        <td style=\"padding:0 28px;\">\n                          <div style=\"height:1px;background:#eaecf0;width:100%;\"></div>\n                        </td>\n                      </tr>\n\n                      <!-- Summary -->\n                      <tr>\n                        <td style=\"padding:18px 28px 10px 28px;\">\n                          <table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\">\n                            <tr>\n                              <td style=\"padding:10px 0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;letter-spacing:.04em;text-transform:uppercase;color:#667085;\">\n                                Orden\n                              </td>\n                              <td align=\"right\" style=\"padding:10px 0;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,'Liberation Mono','Courier New',monospace;font-size:12px;color:#101828;\">\n                                {{orderId}}\n                              </td>\n                            </tr>\n\n                            <tr>\n                              <td style=\"padding:10px 0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;letter-spacing:.04em;text-transform:uppercase;color:#667085;\">\n                                Estado\n                              </td>\n                              <td align=\"right\" style=\"padding:10px 0;\">\n                                <span style=\"display:inline-block;padding:6px 10px;border-radius:999px;background:#f2f4f7;color:#344054;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;font-weight:700;\">\n                                  {{status}}\n                                </span>\n                              </td>\n                            </tr>\n\n                            <tr>\n                              <td style=\"padding:12px 0 2px 0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;letter-spacing:.04em;text-transform:uppercase;color:#667085;\">\n                                Total\n                              </td>\n                              <td align=\"right\" style=\"padding:12px 0 2px 0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:20px;font-weight:900;color:#101828;\">\n                                $ {{total}}\n                              </td>\n                            </tr>\n                          </table>\n                        </td>\n                      </tr>\n\n                      <!-- Items -->\n                      <tr>\n                        <td style=\"padding:0 28px 18px 28px;\">\n                          <div style=\"height:1px;background:#eaecf0;width:100%;\"></div>\n                        </td>\n                      </tr>\n\n                      <tr>\n                        <td style=\"padding:18px 28px 6px 28px;\">\n                          <div style=\"font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;letter-spacing:.04em;text-transform:uppercase;color:#667085;\">\n                            Productos\n                          </div>\n                        </td>\n                      </tr>\n\n                      <tr>\n                        <td style=\"padding:0 28px 22px 28px;\">\n                          <table role=\"presentation\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\"\n                            style=\"border-collapse:separate;border-spacing:0 10px;\">\n                            {{{itemsHtml}}}\n                          </table>\n\n                          <div style=\"margin-top:8px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;color:#98a2b3;line-height:1.6;\">\n                            Nota: Los tiempos de entrega pueden variar segn disponibilidad.\n                          </div>\n                        </td>\n                      </tr>\n\n                      <!-- Footer -->\n                      <tr>\n                        <td style=\"padding:18px 28px 26px 28px;background:#fcfcfd;\">\n                          <div style=\"font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;color:#667085;line-height:1.6;\">\n                            Este correo fue generado automticamente. Si no reconoces esta orden, ignora este mensaje.\n                          </div>\n                          <div style=\"margin-top:10px;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;font-size:12px;color:#98a2b3;\">\n                             {{year}} sdg19 proyecto final\n                          </div>\n                        </td>\n                      </tr>\n\n                    </table>\n                  </td>\n                </tr>\n              </table>\n            </body>\n          </html>\n        ",
     "SubjectPart": "Confirmacin de orden {{orderId}}",
     "TemplateName": "sdg19-order-confirmation",
     "TextPart": "Gracias por tu orden {{orderId}}. Estado: {{status}}. Total: $ {{total}}."
    }
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrderEmailTemplate"
   }
  },
  "OrderEmailFnServiceRole59C3C6B3": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrderEmailFn/ServiceRole/Resource"
   }
  },
  "OrderEmailFnServiceRoleDefaultPolicy24A9A9C7": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "OrdersQueue3DFA1D51",
         "Arn"
        ]
       }
      },
      {
       "Action": "kms:Decrypt",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DataKey17AFBB84",
         "Arn"
        ]
       }
      },
      {
       "Action": "s3:PutObject",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::GetAtt": [
            "EmailsBucket616D9B95",
            "Arn"
           ]
          },
          "/*"
         ]
        ]
       }
      },
      {
       "Action": [
        "kms:Encrypt",
        "kms:GenerateDataKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DataKey17AFBB84",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "ses:SendTemplatedEmail",
        "ses:SendEmail"
       ],
       "Condition": {
        "StringEquals": {
         "ses:FromAddress": "no-reply@example.com"
        }
       },
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "OrderEmailFnServiceRoleDefaultPolicy24A9A9C7",
    "Roles": [
     {
      "Ref": "OrderEmailFnServiceRole59C3C6B3"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrderEmailFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "OrderEmailFn25E3BD4D": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-bootstrap-assets-123456789012-us-east-1",
     "S3Key": "99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820.zip"
    },
    "Environment": {
     "Variables": {
      "EMAILS_BUCKET_NAME": {
       "Ref": "EmailsBucket616D9B95"
      },
      "SES_TEMPLATE_NAME": "sdg19-order-confirmation",
      "SES_FROM_ADDRESS": "no-reply@example.com",
      "EMAILS_BUCKET_KMS_KEY_ID": {
       "Fn::GetAtt": [
        "DataKey17AFBB84",
        "Arn"
       ]
      }
     }
    },
    "Handler": "main.orderEmailHandler",
    "Role": {
     "Fn::GetAtt": [
      "OrderEmailFnServiceRole59C3C6B3",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "Timeout": 15,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "OrderEmailFnServiceRoleDefaultPolicy24A9A9C7",
    "OrderEmailFnServiceRole59C3C6B3"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrderEmailFn/Resource",
    "aws:asset:path": "asset.99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "OrderEmailFnSqsEventSourceSdg19PrimaryStackOrdersQueueFA8EDFFA21BFECCE": {
   "Type": "AWS::Lambda::EventSourceMapping",
   "Properties": {
    "BatchSize": 10,
    "EventSourceArn": {
     "Fn::GetAtt": [
      "OrdersQueue3DFA1D51",
      "Arn"
     ]
    },
    "FunctionName": {
     "Ref": "OrderEmailFn25E3BD4D"
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrderEmailFn/SqsEventSource:Sdg19PrimaryStackOrdersQueueFA8EDFFA/Resource"
   }
  },
  "OrderLakeFnServiceRole340128DE": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrderLakeFn/ServiceRole/Resource"
   }
  },
  "OrderLakeFnServiceRoleDefaultPolicyD1CC19E7": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "xray:PutTraceSegments",
        "xray:PutTelemetryRecords"
       ],
       "Effect": "Allow",
       "Resource": "*"
      },
      {
       "Action": [
        "sqs:ReceiveMessage",
        "sqs:ChangeMessageVisibility",
        "sqs:GetQueueUrl",
        "sqs:DeleteMessage",
        "sqs:GetQueueAttributes"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "OrdersLakeQueue83376934",
         "Arn"
        ]
       }
      },
      {
       "Action": "kms:Decrypt",
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DataKey17AFBB84",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "kinesis:PutRecord",
        "kinesis:PutRecords"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "OrdersStream464CF62B",
         "Arn"
        ]
       }
      },
      {
       "Action": [
        "kms:Decrypt",
        "kms:GenerateDataKey"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "DataKey17AFBB84",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "OrderLakeFnServiceRoleDefaultPolicyD1CC19E7",
    "Roles": [
     {
      "Ref": "OrderLakeFnServiceRole340128DE"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrderLakeFn/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "OrderLakeFnF5943FA5": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-bootstrap-assets-123456789012-us-east-1",
     "S3Key": "99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820.zip"
    },
    "Environment": {
     "Variables": {
      "KINESIS_STREAM_NAME": {
       "Ref": "OrdersStream464CF62B"
      }
     }
    },
    "Handler": "main.orderLakeHandler",
    "Role": {
     "Fn::GetAtt": [
      "OrderLakeFnServiceRole340128DE",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x",
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ],
    "Timeout": 10,
    "TracingConfig": {
     "Mode": "Active"
    }
   },
   "DependsOn": [
    "OrderLakeFnServiceRoleDefaultPolicyD1CC19E7",
    "OrderLakeFnServiceRole340128DE"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrderLakeFn/Resource",
    "aws:asset:path": "asset.99974819925bd3054f6f6bd0470ae8d97a8e7e9e820cabc68f23e89f6f131820",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "OrderLakeFnSqsEventSourceSdg19PrimaryStackOrdersLakeQueueEEE155E52B285396": {
   "Type": "AWS::Lambda::EventSourceMapping",
   "Properties": {
    "BatchSize": 10,
    "EventSourceArn": {
     "Fn::GetAtt": [
      "OrdersLakeQueue83376934",
      "Arn"
     ]
    },
    "FunctionName": {
     "Ref": "OrderLakeFnF5943FA5"
    },
    "FunctionResponseTypes": [
     "ReportBatchItemFailures"
    ],
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/OrderLakeFn/SqsEventSource:Sdg19PrimaryStackOrdersLakeQueueEEE155E5/Resource"
   }
  },
  "CloudTrailLogsBBCFF69F": {
   "Type": "AWS::Logs::LogGroup",
   "Properties": {
    "RetentionInDays": 30,
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "UpdateReplacePolicy": "Retain",
   "DeletionPolicy": "Retain",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/CloudTrailLogs/Resource"
   }
  },
  "CloudTrailLogsRole9F6E6663": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "cloudtrail.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/CloudTrail/LogsRole/Resource"
   }
  },
  "CloudTrailLogsRoleDefaultPolicyD9019B15": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "logs:PutLogEvents",
        "logs:CreateLogStream"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::GetAtt": [
         "CloudTrailLogsBBCFF69F",
         "Arn"
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CloudTrailLogsRoleDefaultPolicyD9019B15",
    "Roles": [
     {
      "Ref": "CloudTrailLogsRole9F6E6663"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/CloudTrail/LogsRole/DefaultPolicy/Resource"
   }
  },
  "CloudTrailA62D711D": {
   "Type": "AWS::CloudTrail::Trail",
   "Properties": {
    "CloudWatchLogsLogGroupArn": {
     "Fn::GetAtt": [
      "CloudTrailLogsBBCFF69F",
      "Arn"
     ]
    },
    "CloudWatchLogsRoleArn": {
     "Fn::GetAtt": [
      "CloudTrailLogsRole9F6E6663",
      "Arn"
     ]
    },
    "EnableLogFileValidation": true,
    "EventSelectors": [],
    "IncludeGlobalServiceEvents": true,
    "IsLogging": true,
    "IsMultiRegionTrail": true,
    "S3BucketName": {
     "Ref": "LogsBucket9C4D8843"
    },
    "Tags": [
     {
      "Key": "project",
      "Value": "sdg19-final"
     },
     {
      "Key": "reason",
      "Value": "sdg19"
     }
    ]
   },
   "DependsOn": [
    "CloudTrailLogsRoleDefaultPolicyD9019B15",
    "CloudTrailLogsRole9F6E6663",
    "LogsBucketPolicyD70D9252"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/CloudTrail/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/3VU227bMAz9lr6rWpdgwF4Tt1uLtmiWZNhjIcuMw8aWPJFKmgn690FyLm67vZjnHIq0eZFHcjQey6sLtaNLXW0uGyxlWLDSGzEHst5pEGpHz2HTkgz3sBfFytzDPopqb1Rrq1KGpSobSHoGUZAhGZa2Q53FDBa+JO2wY7QmqUMeBf0mGX548DlND/JzZhvU+5PY0yi0rQ2yleEngZtZ26QTJ3wERYNgeOjqlSgaW5MMD7b+7qzv0okTPlZ9fvNbJQrVYa0Ydmq/Hclwy9xNOkwHk0l0warOhfQgSXPruUd3hqF26tiHd/R8buJ5bR3+AZdTn1gUjWrLSslQrMwMXItEKfibN/qY5YRvtmB4kb/+UXUdmjq5P6pRoGplmNt+jtmeG3AsnMbPigiY5CQZQWMZpl5vgKeKQPQwBRxQb855hjwKDY5xhVoxtMqoGpwMxVlLAQMaxU6ttiNZrMwvKCfFg9CN9dXKWcMyFEqvBxMb0jlQZw3BLagKHL0Z6z8c10jssPS5fYvxk8MazURrICqsYdev2n/kYXAULs3yy1iGyRy0dVX/0oQWwOLx9aAuX7lHUWzQACGlC+hAtf0KJRRF3XjII79WrMrU7vN9O4St0MHaEqQeXUODW3D7Q6Lcq51ivZZh0iiXU2cQBQHJcNMqbO4qMIycu/NBWELbNXkQORk7hY0My2SyO4EYRd6MtPd51zyxbU//kcFdeueaObvFCtz0UNhgWZ88d56jMLYC+UKftqOR/PxVXl28EOKl84axBTnv7V8MKIFWzgQAAA=="
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/CDKMetadata/Default"
   }
  },
  "ExportsReader8B249524": {
   "Type": "Custom::CrossRegionExportReader",
   "Properties": {
    "ServiceToken": {
     "Fn::GetAtt": [
      "CustomCrossRegionExportReaderCustomResourceProviderHandler46647B68",
      "Arn"
     ]
    },
    "ReaderProps": {
     "region": "us-east-1",
     "prefix": "Sdg19PrimaryStack",
     "imports": {
      "/cdk/exports/Sdg19PrimaryStack/Sdg19ReplicaStackuseast2FnGetAttEmailsReplicaKeyF79649DFArn5948744C": "{{resolve:ssm:/cdk/exports/Sdg19PrimaryStack/Sdg19ReplicaStackuseast2FnGetAttEmailsReplicaKeyF79649DFArn5948744C}}",
      "/cdk/exports/Sdg19PrimaryStack/Sdg19ReplicaStackuseast2FnGetAttEmailsReplicaBucket67B3049CArnA42F7D5C": "{{resolve:ssm:/cdk/exports/Sdg19PrimaryStack/Sdg19ReplicaStackuseast2FnGetAttEmailsReplicaBucket67B3049CArnA42F7D5C}}"
     }
    }
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/ExportsReader/Resource/Default"
   }
  },
  "CustomCrossRegionExportReaderCustomResourceProviderRole10531BBD": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Version": "2012-10-17",
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ]
    },
    "ManagedPolicyArns": [
     {
      "Fn::Sub": "arn:${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
     }
    ],
    "Policies": [
     {
      "PolicyName": "Inline",
      "PolicyDocument": {
       "Version": "2012-10-17",
       "Statement": [
        {
         "Effect": "Allow",
         "Resource": {
          "Fn::Join": [
           "",
           [
            "arn:",
            {
             "Ref": "AWS::Partition"
            },
            ":ssm:us-east-1:123456789012:parameter/cdk/exports/Sdg19PrimaryStack/*"
           ]
          ]
         },
         "Action": [
          "ssm:AddTagsToResource",
          "ssm:RemoveTagsFromResource",
          "ssm:GetParameters"
         ]
        }
       ]
      }
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/Custom::CrossRegionExportReaderCustomResourceProvider/Role"
   }
  },
  "CustomCrossRegionExportReaderCustomResourceProviderHandler46647B68": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-bootstrap-assets-123456789012-us-east-1",
     "S3Key": "d41c8e6342cd078b5ea5aec11522bdb605eae00f4bb98a3fb0b44c827e9b5ca9.zip"
    },
    "Timeout": 900,
    "MemorySize": 128,
    "Handler": "__entrypoint__.handler",
    "Role": {
     "Fn::GetAtt": [
      "CustomCrossRegionExportReaderCustomResourceProviderRole10531BBD",
      "Arn"
     ]
    },
    "Runtime": "nodejs22.x"
   },
   "DependsOn": [
    "CustomCrossRegionExportReaderCustomResourceProviderRole10531BBD"
   ],
   "Metadata": {
    "aws:cdk:path": "Sdg19PrimaryStack/Custom::CrossRegionExportReaderCustomResourceProvider/Handler",
    "aws:asset:path": "asset.d41c8e6342cd078b5ea5aec11522bdb605eae00f4bb98a3fb0b44c827e9b5ca9",
    "aws:asset:property": "Code"
   }
  }
 },
 "Mappings": {
  "AWSCloudFrontPartitionHostedZoneIdMap": {
   "aws": {
    "zoneId": "Z2FDTNDATAQYW2"
   },
   "aws-cn": {
    "zoneId": "Z3RFFRIM2A3IF5"
   }
  }
 },
 "Outputs": {
  "ApiUrl": {
   "Value": {
    "Fn::GetAtt": [
     "HttpApiF5A9A8A7",
     "ApiEndpoint"
    ]
   }
  },
  "UserPoolId": {
   "Value": {
    "Ref": "UserPool6BA7E5F2"
   }
  },
  "UserPoolClientId": {
   "Value": {
    "Ref": "UserPoolClient2F5918F7"
   }
  },
  "TableName": {
   "Value": {
    "Ref": "MainTable74195DAB"
   }
  },
  "WebBucketName": {
   "Value": {
    "Ref": "WebBucket12880F5B"
   }
  },
  "WebDistributionId": {
   "Value": {
    "Ref": "WebDistribution59C46482"
   }
  },
  "DataBucketName": {
   "Value": {
    "Ref": "DataBucketE3889A50"
   }
  },
  "EmailsBucketName": {
   "Value": {
    "Ref": "EmailsBucket616D9B95"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}